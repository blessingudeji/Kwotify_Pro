var vr=!1,br=!1,xe=[],wr=-1;function Mi(r){Zi(r)}function Zi(r){xe.includes(r)||xe.push(r),Bi()}function nn(r){let e=xe.indexOf(r);e!==-1&&e>wr&&xe.splice(e,1)}function Bi(){!br&&!vr&&(vr=!0,queueMicrotask(zi))}function zi(){vr=!1,br=!0;for(let r=0;r<xe.length;r++)xe[r](),wr=r;xe.length=0,wr=-1,br=!1}var Ke,je,He,an,xr=!0;function qi(r){xr=!1,r(),xr=!0}function Fi(r){Ke=r.reactive,He=r.release,je=e=>r.effect(e,{scheduler:t=>{xr?Mi(t):t()}}),an=r.raw}function ws(r){je=r}function Vi(r){let e=()=>{};return[s=>{let n=je(s);return r._x_effects||(r._x_effects=new Set,r._x_runEffects=()=>{r._x_effects.forEach(i=>i())}),r._x_effects.add(n),e=()=>{n!==void 0&&(r._x_effects.delete(n),He(n))},n},()=>{e()}]}function on(r,e){let t=!0,s,n=je(()=>{let i=r();JSON.stringify(i),t?s=i:queueMicrotask(()=>{e(i,s),s=i}),t=!1});return()=>He(n)}function it(r,e,t={}){r.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0}))}function de(r,e){if(typeof ShadowRoot=="function"&&r instanceof ShadowRoot){Array.from(r.children).forEach(n=>de(n,e));return}let t=!1;if(e(r,()=>t=!0),t)return;let s=r.firstElementChild;for(;s;)de(s,e),s=s.nextElementSibling}function J(r,...e){console.warn(`Alpine Warning: ${r}`,...e)}var xs=!1;function Ji(){xs&&J("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),xs=!0,document.body||J("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),it(document,"alpine:init"),it(document,"alpine:initializing"),Xr(),Wi(e=>se(e,de)),Wr(e=>Hr(e)),mn((e,t)=>{rs(e,t).forEach(s=>s())});let r=e=>!Xt(e.parentElement,!0);Array.from(document.querySelectorAll(un().join(","))).filter(r).forEach(e=>{se(e)}),it(document,"alpine:initialized")}var Kr=[],cn=[];function ln(){return Kr.map(r=>r())}function un(){return Kr.concat(cn).map(r=>r())}function dn(r){Kr.push(r)}function hn(r){cn.push(r)}function Xt(r,e=!1){return kt(r,t=>{if((e?un():ln()).some(n=>t.matches(n)))return!0})}function kt(r,e){if(r){if(e(r))return r;if(r._x_teleportBack&&(r=r._x_teleportBack),!!r.parentElement)return kt(r.parentElement,e)}}function Ki(r){return ln().some(e=>r.matches(e))}var fn=[];function Hi(r){fn.push(r)}function se(r,e=de,t=()=>{}){la(()=>{e(r,(s,n)=>{t(s,n),fn.forEach(i=>i(s,n)),rs(s,s.attributes).forEach(i=>i()),s._x_ignore&&n()})})}function Hr(r,e=de){e(r,t=>{vn(t),Gi(t)})}var pn=[],_n=[],gn=[];function Wi(r){gn.push(r)}function Wr(r,e){typeof e=="function"?(r._x_cleanups||(r._x_cleanups=[]),r._x_cleanups.push(e)):(e=r,_n.push(e))}function mn(r){pn.push(r)}function yn(r,e,t){r._x_attributeCleanups||(r._x_attributeCleanups={}),r._x_attributeCleanups[e]||(r._x_attributeCleanups[e]=[]),r._x_attributeCleanups[e].push(t)}function vn(r,e){r._x_attributeCleanups&&Object.entries(r._x_attributeCleanups).forEach(([t,s])=>{(e===void 0||e.includes(t))&&(s.forEach(n=>n()),delete r._x_attributeCleanups[t])})}function Gi(r){if(r._x_cleanups)for(;r._x_cleanups.length;)r._x_cleanups.pop()()}var Gr=new MutationObserver(es),Yr=!1;function Xr(){Gr.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Yr=!0}function bn(){Yi(),Gr.disconnect(),Yr=!1}var Qe=[];function Yi(){let r=Gr.takeRecords();Qe.push(()=>r.length>0&&es(r));let e=Qe.length;queueMicrotask(()=>{if(Qe.length===e)for(;Qe.length>0;)Qe.shift()()})}function N(r){if(!Yr)return r();bn();let e=r();return Xr(),e}var Qr=!1,Zt=[];function Xi(){Qr=!0}function Qi(){Qr=!1,es(Zt),Zt=[]}function es(r){if(Qr){Zt=Zt.concat(r);return}let e=new Set,t=new Set,s=new Map,n=new Map;for(let i=0;i<r.length;i++)if(!r[i].target._x_ignoreMutationObserver&&(r[i].type==="childList"&&(r[i].addedNodes.forEach(a=>a.nodeType===1&&e.add(a)),r[i].removedNodes.forEach(a=>a.nodeType===1&&t.add(a))),r[i].type==="attributes")){let a=r[i].target,o=r[i].attributeName,c=r[i].oldValue,l=()=>{s.has(a)||s.set(a,[]),s.get(a).push({name:o,value:a.getAttribute(o)})},u=()=>{n.has(a)||n.set(a,[]),n.get(a).push(o)};a.hasAttribute(o)&&c===null?l():a.hasAttribute(o)?(u(),l()):u()}n.forEach((i,a)=>{vn(a,i)}),s.forEach((i,a)=>{pn.forEach(o=>o(a,i))});for(let i of t)e.has(i)||(_n.forEach(a=>a(i)),Hr(i));e.forEach(i=>{i._x_ignoreSelf=!0,i._x_ignore=!0});for(let i of e)t.has(i)||i.isConnected&&(delete i._x_ignoreSelf,delete i._x_ignore,gn.forEach(a=>a(i)),i._x_ignore=!0,i._x_ignoreSelf=!0);e.forEach(i=>{delete i._x_ignoreSelf,delete i._x_ignore}),e=null,t=null,s=null,n=null}function wn(r){return Tt(Be(r))}function St(r,e,t){return r._x_dataStack=[e,...Be(t||r)],()=>{r._x_dataStack=r._x_dataStack.filter(s=>s!==e)}}function Be(r){return r._x_dataStack?r._x_dataStack:typeof ShadowRoot=="function"&&r instanceof ShadowRoot?Be(r.host):r.parentNode?Be(r.parentNode):[]}function Tt(r){return new Proxy({objects:r},ea)}var ea={ownKeys({objects:r}){return Array.from(new Set(r.flatMap(e=>Object.keys(e))))},has({objects:r},e){return e==Symbol.unscopables?!1:r.some(t=>Object.prototype.hasOwnProperty.call(t,e)||Reflect.has(t,e))},get({objects:r},e,t){return e=="toJSON"?ta:Reflect.get(r.find(s=>Reflect.has(s,e))||{},e,t)},set({objects:r},e,t,s){const n=r.find(a=>Object.prototype.hasOwnProperty.call(a,e))||r[r.length-1],i=Object.getOwnPropertyDescriptor(n,e);return i!=null&&i.set&&(i!=null&&i.get)?Reflect.set(n,e,t,s):Reflect.set(n,e,t)}};function ta(){return Reflect.ownKeys(this).reduce((e,t)=>(e[t]=Reflect.get(this,t),e),{})}function xn(r){let e=s=>typeof s=="object"&&!Array.isArray(s)&&s!==null,t=(s,n="")=>{Object.entries(Object.getOwnPropertyDescriptors(s)).forEach(([i,{value:a,enumerable:o}])=>{if(o===!1||a===void 0||typeof a=="object"&&a!==null&&a.__v_skip)return;let c=n===""?i:`${n}.${i}`;typeof a=="object"&&a!==null&&a._x_interceptor?s[i]=a.initialize(r,c,i):e(a)&&a!==s&&!(a instanceof Element)&&t(a,c)})};return t(r)}function kn(r,e=()=>{}){let t={initialValue:void 0,_x_interceptor:!0,initialize(s,n,i){return r(this.initialValue,()=>ra(s,n),a=>kr(s,n,a),n,i)}};return e(t),s=>{if(typeof s=="object"&&s!==null&&s._x_interceptor){let n=t.initialize.bind(t);t.initialize=(i,a,o)=>{let c=s.initialize(i,a,o);return t.initialValue=c,n(i,a,o)}}else t.initialValue=s;return t}}function ra(r,e){return e.split(".").reduce((t,s)=>t[s],r)}function kr(r,e,t){if(typeof e=="string"&&(e=e.split(".")),e.length===1)r[e[0]]=t;else{if(e.length===0)throw error;return r[e[0]]||(r[e[0]]={}),kr(r[e[0]],e.slice(1),t)}}var Sn={};function X(r,e){Sn[r]=e}function Sr(r,e){return Object.entries(Sn).forEach(([t,s])=>{let n=null;function i(){if(n)return n;{let[a,o]=jn(e);return n={interceptor:kn,...a},Wr(e,o),n}}Object.defineProperty(r,`$${t}`,{get(){return s(e,i())},enumerable:!1})}),r}function sa(r,e,t,...s){try{return t(...s)}catch(n){lt(n,r,e)}}function lt(r,e,t=void 0){r=Object.assign(r??{message:"No error message given."},{el:e,expression:t}),console.warn(`Alpine Expression Error: ${r.message}

${t?'Expression: "'+t+`"

`:""}`,e),setTimeout(()=>{throw r},0)}var Dt=!0;function Tn(r){let e=Dt;Dt=!1;let t=r();return Dt=e,t}function ke(r,e,t={}){let s;return M(r,e)(n=>s=n,t),s}function M(...r){return En(...r)}var En=On;function na(r){En=r}function On(r,e){let t={};Sr(t,r);let s=[t,...Be(r)],n=typeof e=="function"?ia(s,e):oa(s,e,r);return sa.bind(null,r,e,n)}function ia(r,e){return(t=()=>{},{scope:s={},params:n=[]}={})=>{let i=e.apply(Tt([s,...r]),n);Bt(t,i)}}var cr={};function aa(r,e){if(cr[r])return cr[r];let t=Object.getPrototypeOf(async function(){}).constructor,s=/^[\n\s]*if.*\(.*\)/.test(r.trim())||/^(let|const)\s/.test(r.trim())?`(async()=>{ ${r} })()`:r,i=(()=>{try{let a=new t(["__self","scope"],`with (scope) { __self.result = ${s} }; __self.finished = true; return __self.result;`);return Object.defineProperty(a,"name",{value:`[Alpine] ${r}`}),a}catch(a){return lt(a,e,r),Promise.resolve()}})();return cr[r]=i,i}function oa(r,e,t){let s=aa(e,t);return(n=()=>{},{scope:i={},params:a=[]}={})=>{s.result=void 0,s.finished=!1;let o=Tt([i,...r]);if(typeof s=="function"){let c=s(s,o).catch(l=>lt(l,t,e));s.finished?(Bt(n,s.result,o,a,t),s.result=void 0):c.then(l=>{Bt(n,l,o,a,t)}).catch(l=>lt(l,t,e)).finally(()=>s.result=void 0)}}}function Bt(r,e,t,s,n){if(Dt&&typeof e=="function"){let i=e.apply(t,s);i instanceof Promise?i.then(a=>Bt(r,a,t,s)).catch(a=>lt(a,n,e)):r(i)}else typeof e=="object"&&e instanceof Promise?e.then(i=>r(i)):r(e)}var ts="x-";function We(r=""){return ts+r}function ca(r){ts=r}var Tr={};function L(r,e){return Tr[r]=e,{before(t){if(!Tr[t]){console.warn(String.raw`Cannot find directive \`${t}\`. \`${r}\` will use the default order of execution`);return}const s=we.indexOf(t);we.splice(s>=0?s:we.indexOf("DEFAULT"),0,r)}}}function rs(r,e,t){if(e=Array.from(e),r._x_virtualDirectives){let i=Object.entries(r._x_virtualDirectives).map(([o,c])=>({name:o,value:c})),a=An(i);i=i.map(o=>a.find(c=>c.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),e=e.concat(i)}let s={};return e.map(Rn((i,a)=>s[i]=a)).filter(Ln).map(da(s,t)).sort(ha).map(i=>ua(r,i))}function An(r){return Array.from(r).map(Rn()).filter(e=>!Ln(e))}var Er=!1,st=new Map,Cn=Symbol();function la(r){Er=!0;let e=Symbol();Cn=e,st.set(e,[]);let t=()=>{for(;st.get(e).length;)st.get(e).shift()();st.delete(e)},s=()=>{Er=!1,t()};r(t),s()}function jn(r){let e=[],t=o=>e.push(o),[s,n]=Vi(r);return e.push(n),[{Alpine:Et,effect:s,cleanup:t,evaluateLater:M.bind(M,r),evaluate:ke.bind(ke,r)},()=>e.forEach(o=>o())]}function ua(r,e){let t=()=>{},s=Tr[e.type]||t,[n,i]=jn(r);yn(r,e.original,i);let a=()=>{r._x_ignore||r._x_ignoreSelf||(s.inline&&s.inline(r,e,n),s=s.bind(s,r,e,n),Er?st.get(Cn).push(s):s())};return a.runCleanups=i,a}var $n=(r,e)=>({name:t,value:s})=>(t.startsWith(r)&&(t=t.replace(r,e)),{name:t,value:s}),In=r=>r;function Rn(r=()=>{}){return({name:e,value:t})=>{let{name:s,value:n}=Pn.reduce((i,a)=>a(i),{name:e,value:t});return s!==e&&r(s,e),{name:s,value:n}}}var Pn=[];function ss(r){Pn.push(r)}function Ln({name:r}){return Nn().test(r)}var Nn=()=>new RegExp(`^${ts}([^:^.]+)\\b`);function da(r,e){return({name:t,value:s})=>{let n=t.match(Nn()),i=t.match(/:([a-zA-Z0-9\-_:]+)/),a=t.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],o=e||r[t]||t;return{type:n?n[1]:null,value:i?i[1]:null,modifiers:a.map(c=>c.replace(".","")),expression:s,original:o}}}var Or="DEFAULT",we=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Or,"teleport"];function ha(r,e){let t=we.indexOf(r.type)===-1?Or:r.type,s=we.indexOf(e.type)===-1?Or:e.type;return we.indexOf(t)-we.indexOf(s)}var Ar=[],ns=!1;function is(r=()=>{}){return queueMicrotask(()=>{ns||setTimeout(()=>{Cr()})}),new Promise(e=>{Ar.push(()=>{r(),e()})})}function Cr(){for(ns=!1;Ar.length;)Ar.shift()()}function fa(){ns=!0}function as(r,e){return Array.isArray(e)?ks(r,e.join(" ")):typeof e=="object"&&e!==null?pa(r,e):typeof e=="function"?as(r,e()):ks(r,e)}function ks(r,e){let t=n=>n.split(" ").filter(i=>!r.classList.contains(i)).filter(Boolean),s=n=>(r.classList.add(...n),()=>{r.classList.remove(...n)});return e=e===!0?e="":e||"",s(t(e))}function pa(r,e){let t=o=>o.split(" ").filter(Boolean),s=Object.entries(e).flatMap(([o,c])=>c?t(o):!1).filter(Boolean),n=Object.entries(e).flatMap(([o,c])=>c?!1:t(o)).filter(Boolean),i=[],a=[];return n.forEach(o=>{r.classList.contains(o)&&(r.classList.remove(o),a.push(o))}),s.forEach(o=>{r.classList.contains(o)||(r.classList.add(o),i.push(o))}),()=>{a.forEach(o=>r.classList.add(o)),i.forEach(o=>r.classList.remove(o))}}function Qt(r,e){return typeof e=="object"&&e!==null?_a(r,e):ga(r,e)}function _a(r,e){let t={};return Object.entries(e).forEach(([s,n])=>{t[s]=r.style[s],s.startsWith("--")||(s=ma(s)),r.style.setProperty(s,n)}),setTimeout(()=>{r.style.length===0&&r.removeAttribute("style")}),()=>{Qt(r,t)}}function ga(r,e){let t=r.getAttribute("style",e);return r.setAttribute("style",e),()=>{r.setAttribute("style",t||"")}}function ma(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jr(r,e=()=>{}){let t=!1;return function(){t?e.apply(this,arguments):(t=!0,r.apply(this,arguments))}}L("transition",(r,{value:e,modifiers:t,expression:s},{evaluate:n})=>{typeof s=="function"&&(s=n(s)),s!==!1&&(!s||typeof s=="boolean"?va(r,t,e):ya(r,s,e))});function ya(r,e,t){Dn(r,as,""),{enter:n=>{r._x_transition.enter.during=n},"enter-start":n=>{r._x_transition.enter.start=n},"enter-end":n=>{r._x_transition.enter.end=n},leave:n=>{r._x_transition.leave.during=n},"leave-start":n=>{r._x_transition.leave.start=n},"leave-end":n=>{r._x_transition.leave.end=n}}[t](e)}function va(r,e,t){Dn(r,Qt);let s=!e.includes("in")&&!e.includes("out")&&!t,n=s||e.includes("in")||["enter"].includes(t),i=s||e.includes("out")||["leave"].includes(t);e.includes("in")&&!s&&(e=e.filter((k,C)=>C<e.indexOf("out"))),e.includes("out")&&!s&&(e=e.filter((k,C)=>C>e.indexOf("out")));let a=!e.includes("opacity")&&!e.includes("scale"),o=a||e.includes("opacity"),c=a||e.includes("scale"),l=o?0:1,u=c?et(e,"scale",95)/100:1,d=et(e,"delay",0)/1e3,h=et(e,"origin","center"),_="opacity, transform",w=et(e,"duration",150)/1e3,T=et(e,"duration",75)/1e3,p="cubic-bezier(0.4, 0.0, 0.2, 1)";n&&(r._x_transition.enter.during={transformOrigin:h,transitionDelay:`${d}s`,transitionProperty:_,transitionDuration:`${w}s`,transitionTimingFunction:p},r._x_transition.enter.start={opacity:l,transform:`scale(${u})`},r._x_transition.enter.end={opacity:1,transform:"scale(1)"}),i&&(r._x_transition.leave.during={transformOrigin:h,transitionDelay:`${d}s`,transitionProperty:_,transitionDuration:`${T}s`,transitionTimingFunction:p},r._x_transition.leave.start={opacity:1,transform:"scale(1)"},r._x_transition.leave.end={opacity:l,transform:`scale(${u})`})}function Dn(r,e,t={}){r._x_transition||(r._x_transition={enter:{during:t,start:t,end:t},leave:{during:t,start:t,end:t},in(s=()=>{},n=()=>{}){$r(r,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},s,n)},out(s=()=>{},n=()=>{}){$r(r,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},s,n)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(r,e,t,s){const n=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let i=()=>n(t);if(e){r._x_transition&&(r._x_transition.enter||r._x_transition.leave)?r._x_transition.enter&&(Object.entries(r._x_transition.enter.during).length||Object.entries(r._x_transition.enter.start).length||Object.entries(r._x_transition.enter.end).length)?r._x_transition.in(t):i():r._x_transition?r._x_transition.in(t):i();return}r._x_hidePromise=r._x_transition?new Promise((a,o)=>{r._x_transition.out(()=>{},()=>a(s)),r._x_transitioning&&r._x_transitioning.beforeCancel(()=>o({isFromCancelledTransition:!0}))}):Promise.resolve(s),queueMicrotask(()=>{let a=Un(r);a?(a._x_hideChildren||(a._x_hideChildren=[]),a._x_hideChildren.push(r)):n(()=>{let o=c=>{let l=Promise.all([c._x_hidePromise,...(c._x_hideChildren||[]).map(o)]).then(([u])=>u());return delete c._x_hidePromise,delete c._x_hideChildren,l};o(r).catch(c=>{if(!c.isFromCancelledTransition)throw c})})})};function Un(r){let e=r.parentNode;if(e)return e._x_hidePromise?e:Un(e)}function $r(r,e,{during:t,start:s,end:n}={},i=()=>{},a=()=>{}){if(r._x_transitioning&&r._x_transitioning.cancel(),Object.keys(t).length===0&&Object.keys(s).length===0&&Object.keys(n).length===0){i(),a();return}let o,c,l;ba(r,{start(){o=e(r,s)},during(){c=e(r,t)},before:i,end(){o(),l=e(r,n)},after:a,cleanup(){c(),l()}})}function ba(r,e){let t,s,n,i=jr(()=>{N(()=>{t=!0,s||e.before(),n||(e.end(),Cr()),e.after(),r.isConnected&&e.cleanup(),delete r._x_transitioning})});r._x_transitioning={beforeCancels:[],beforeCancel(a){this.beforeCancels.push(a)},cancel:jr(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();i()}),finish:i},N(()=>{e.start(),e.during()}),fa(),requestAnimationFrame(()=>{if(t)return;let a=Number(getComputedStyle(r).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,o=Number(getComputedStyle(r).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;a===0&&(a=Number(getComputedStyle(r).animationDuration.replace("s",""))*1e3),N(()=>{e.before()}),s=!0,requestAnimationFrame(()=>{t||(N(()=>{e.end()}),Cr(),setTimeout(r._x_transitioning.finish,a+o),n=!0)})})}function et(r,e,t){if(r.indexOf(e)===-1)return t;const s=r[r.indexOf(e)+1];if(!s||e==="scale"&&isNaN(s))return t;if(e==="duration"||e==="delay"){let n=s.match(/([0-9]+)ms/);if(n)return n[1]}return e==="origin"&&["top","right","left","center","bottom"].includes(r[r.indexOf(e)+2])?[s,r[r.indexOf(e)+2]].join(" "):s}var he=!1;function $e(r,e=()=>{}){return(...t)=>he?e(...t):r(...t)}function wa(r){return(...e)=>he&&r(...e)}var Mn=[];function er(r){Mn.push(r)}function xa(r,e){Mn.forEach(t=>t(r,e)),he=!0,Zn(()=>{se(e,(t,s)=>{s(t,()=>{})})}),he=!1}var Ir=!1;function ka(r,e){e._x_dataStack||(e._x_dataStack=r._x_dataStack),he=!0,Ir=!0,Zn(()=>{Sa(e)}),he=!1,Ir=!1}function Sa(r){let e=!1;se(r,(s,n)=>{de(s,(i,a)=>{if(e&&Ki(i))return a();e=!0,n(i,a)})})}function Zn(r){let e=je;ws((t,s)=>{let n=e(t);return He(n),()=>{}}),r(),ws(e)}function Bn(r,e,t,s=[]){switch(r._x_bindings||(r._x_bindings=Ke({})),r._x_bindings[e]=t,e=s.includes("camel")?Ia(e):e,e){case"value":Ta(r,t);break;case"style":Oa(r,t);break;case"class":Ea(r,t);break;case"selected":case"checked":Aa(r,e,t);break;default:zn(r,e,t);break}}function Ta(r,e){if(r.type==="radio")r.attributes.value===void 0&&(r.value=e),window.fromModel&&(typeof e=="boolean"?r.checked=Ut(r.value)===e:r.checked=Ss(r.value,e));else if(r.type==="checkbox")Number.isInteger(e)?r.value=e:!Array.isArray(e)&&typeof e!="boolean"&&![null,void 0].includes(e)?r.value=String(e):Array.isArray(e)?r.checked=e.some(t=>Ss(t,r.value)):r.checked=!!e;else if(r.tagName==="SELECT")$a(r,e);else{if(r.value===e)return;r.value=e===void 0?"":e}}function Ea(r,e){r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedClasses=as(r,e)}function Oa(r,e){r._x_undoAddedStyles&&r._x_undoAddedStyles(),r._x_undoAddedStyles=Qt(r,e)}function Aa(r,e,t){zn(r,e,t),ja(r,e,t)}function zn(r,e,t){[null,void 0,!1].includes(t)&&Ra(e)?r.removeAttribute(e):(qn(e)&&(t=e),Ca(r,e,t))}function Ca(r,e,t){r.getAttribute(e)!=t&&r.setAttribute(e,t)}function ja(r,e,t){r[e]!==t&&(r[e]=t)}function $a(r,e){const t=[].concat(e).map(s=>s+"");Array.from(r.options).forEach(s=>{s.selected=t.includes(s.value)})}function Ia(r){return r.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function Ss(r,e){return r==e}function Ut(r){return[1,"1","true","on","yes",!0].includes(r)?!0:[0,"0","false","off","no",!1].includes(r)?!1:r?!!r:null}function qn(r){return["disabled","checked","required","readonly","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(r)}function Ra(r){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(r)}function Pa(r,e,t){return r._x_bindings&&r._x_bindings[e]!==void 0?r._x_bindings[e]:Fn(r,e,t)}function La(r,e,t,s=!0){if(r._x_bindings&&r._x_bindings[e]!==void 0)return r._x_bindings[e];if(r._x_inlineBindings&&r._x_inlineBindings[e]!==void 0){let n=r._x_inlineBindings[e];return n.extract=s,Tn(()=>ke(r,n.expression))}return Fn(r,e,t)}function Fn(r,e,t){let s=r.getAttribute(e);return s===null?typeof t=="function"?t():t:s===""?!0:qn(e)?!![e,"true"].includes(s):s}function Vn(r,e){var t;return function(){var s=this,n=arguments,i=function(){t=null,r.apply(s,n)};clearTimeout(t),t=setTimeout(i,e)}}function Jn(r,e){let t;return function(){let s=this,n=arguments;t||(r.apply(s,n),t=!0,setTimeout(()=>t=!1,e))}}function Kn({get:r,set:e},{get:t,set:s}){let n=!0,i,a=je(()=>{let o=r(),c=t();if(n)s(lr(o)),n=!1;else{let l=JSON.stringify(o),u=JSON.stringify(c);l!==i?s(lr(o)):l!==u&&e(lr(c))}i=JSON.stringify(r()),JSON.stringify(t())});return()=>{He(a)}}function lr(r){return typeof r=="object"?JSON.parse(JSON.stringify(r)):r}function Na(r){(Array.isArray(r)?r:[r]).forEach(t=>t(Et))}var ye={},Ts=!1;function Da(r,e){if(Ts||(ye=Ke(ye),Ts=!0),e===void 0)return ye[r];ye[r]=e,typeof e=="object"&&e!==null&&e.hasOwnProperty("init")&&typeof e.init=="function"&&ye[r].init(),xn(ye[r])}function Ua(){return ye}var Hn={};function Ma(r,e){let t=typeof e!="function"?()=>e:e;return r instanceof Element?Wn(r,t()):(Hn[r]=t,()=>{})}function Za(r){return Object.entries(Hn).forEach(([e,t])=>{Object.defineProperty(r,e,{get(){return(...s)=>t(...s)}})}),r}function Wn(r,e,t){let s=[];for(;s.length;)s.pop()();let n=Object.entries(e).map(([a,o])=>({name:a,value:o})),i=An(n);return n=n.map(a=>i.find(o=>o.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),rs(r,n,t).map(a=>{s.push(a.runCleanups),a()}),()=>{for(;s.length;)s.pop()()}}var Gn={};function Ba(r,e){Gn[r]=e}function za(r,e){return Object.entries(Gn).forEach(([t,s])=>{Object.defineProperty(r,t,{get(){return(...n)=>s.bind(e)(...n)},enumerable:!1})}),r}var qa={get reactive(){return Ke},get release(){return He},get effect(){return je},get raw(){return an},version:"3.13.8",flushAndStopDeferringMutations:Qi,dontAutoEvaluateFunctions:Tn,disableEffectScheduling:qi,startObservingMutations:Xr,stopObservingMutations:bn,setReactivityEngine:Fi,onAttributeRemoved:yn,onAttributesAdded:mn,closestDataStack:Be,skipDuringClone:$e,onlyDuringClone:wa,addRootSelector:dn,addInitSelector:hn,interceptClone:er,addScopeToNode:St,deferMutations:Xi,mapAttributes:ss,evaluateLater:M,interceptInit:Hi,setEvaluator:na,mergeProxies:Tt,extractProp:La,findClosest:kt,onElRemoved:Wr,closestRoot:Xt,destroyTree:Hr,interceptor:kn,transition:$r,setStyles:Qt,mutateDom:N,directive:L,entangle:Kn,throttle:Jn,debounce:Vn,evaluate:ke,initTree:se,nextTick:is,prefixed:We,prefix:ca,plugin:Na,magic:X,store:Da,start:Ji,clone:ka,cloneNode:xa,bound:Pa,$data:wn,watch:on,walk:de,data:Ba,bind:Ma},Et=qa;function Fa(r,e){const t=Object.create(null),s=r.split(",");for(let n=0;n<s.length;n++)t[s[n]]=!0;return e?n=>!!t[n.toLowerCase()]:n=>!!t[n]}var Va=Object.freeze({}),Ja=Object.prototype.hasOwnProperty,tr=(r,e)=>Ja.call(r,e),Se=Array.isArray,at=r=>Yn(r)==="[object Map]",Ka=r=>typeof r=="string",os=r=>typeof r=="symbol",rr=r=>r!==null&&typeof r=="object",Ha=Object.prototype.toString,Yn=r=>Ha.call(r),Xn=r=>Yn(r).slice(8,-1),cs=r=>Ka(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Wa=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},Ga=Wa(r=>r.charAt(0).toUpperCase()+r.slice(1)),Qn=(r,e)=>r!==e&&(r===r||e===e),Rr=new WeakMap,tt=[],Q,Te=Symbol("iterate"),Pr=Symbol("Map key iterate");function Ya(r){return r&&r._isEffect===!0}function Xa(r,e=Va){Ya(r)&&(r=r.raw);const t=to(r,e);return e.lazy||t(),t}function Qa(r){r.active&&(ei(r),r.options.onStop&&r.options.onStop(),r.active=!1)}var eo=0;function to(r,e){const t=function(){if(!t.active)return r();if(!tt.includes(t)){ei(t);try{return so(),tt.push(t),Q=t,r()}finally{tt.pop(),ti(),Q=tt[tt.length-1]}}};return t.id=eo++,t.allowRecurse=!!e.allowRecurse,t._isEffect=!0,t.active=!0,t.raw=r,t.deps=[],t.options=e,t}function ei(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}var ze=!0,ls=[];function ro(){ls.push(ze),ze=!1}function so(){ls.push(ze),ze=!0}function ti(){const r=ls.pop();ze=r===void 0?!0:r}function G(r,e,t){if(!ze||Q===void 0)return;let s=Rr.get(r);s||Rr.set(r,s=new Map);let n=s.get(t);n||s.set(t,n=new Set),n.has(Q)||(n.add(Q),Q.deps.push(n),Q.options.onTrack&&Q.options.onTrack({effect:Q,target:r,type:e,key:t}))}function fe(r,e,t,s,n,i){const a=Rr.get(r);if(!a)return;const o=new Set,c=u=>{u&&u.forEach(d=>{(d!==Q||d.allowRecurse)&&o.add(d)})};if(e==="clear")a.forEach(c);else if(t==="length"&&Se(r))a.forEach((u,d)=>{(d==="length"||d>=s)&&c(u)});else switch(t!==void 0&&c(a.get(t)),e){case"add":Se(r)?cs(t)&&c(a.get("length")):(c(a.get(Te)),at(r)&&c(a.get(Pr)));break;case"delete":Se(r)||(c(a.get(Te)),at(r)&&c(a.get(Pr)));break;case"set":at(r)&&c(a.get(Te));break}const l=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:r,key:t,type:e,newValue:s,oldValue:n,oldTarget:i}),u.options.scheduler?u.options.scheduler(u):u()};o.forEach(l)}var no=Fa("__proto__,__v_isRef,__isVue"),ri=new Set(Object.getOwnPropertyNames(Symbol).map(r=>Symbol[r]).filter(os)),io=si(),ao=si(!0),Es=oo();function oo(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const s=R(this);for(let i=0,a=this.length;i<a;i++)G(s,"get",i+"");const n=s[e](...t);return n===-1||n===!1?s[e](...t.map(R)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){ro();const s=R(this)[e].apply(this,t);return ti(),s}}),r}function si(r=!1,e=!1){return function(s,n,i){if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_raw"&&i===(r?e?So:oi:e?ko:ai).get(s))return s;const a=Se(s);if(!r&&a&&tr(Es,n))return Reflect.get(Es,n,i);const o=Reflect.get(s,n,i);return(os(n)?ri.has(n):no(n))||(r||G(s,"get",n),e)?o:Lr(o)?!a||!cs(n)?o.value:o:rr(o)?r?ci(o):fs(o):o}}var co=lo();function lo(r=!1){return function(t,s,n,i){let a=t[s];if(!r&&(n=R(n),a=R(a),!Se(t)&&Lr(a)&&!Lr(n)))return a.value=n,!0;const o=Se(t)&&cs(s)?Number(s)<t.length:tr(t,s),c=Reflect.set(t,s,n,i);return t===R(i)&&(o?Qn(n,a)&&fe(t,"set",s,n,a):fe(t,"add",s,n)),c}}function uo(r,e){const t=tr(r,e),s=r[e],n=Reflect.deleteProperty(r,e);return n&&t&&fe(r,"delete",e,void 0,s),n}function ho(r,e){const t=Reflect.has(r,e);return(!os(e)||!ri.has(e))&&G(r,"has",e),t}function fo(r){return G(r,"iterate",Se(r)?"length":Te),Reflect.ownKeys(r)}var po={get:io,set:co,deleteProperty:uo,has:ho,ownKeys:fo},_o={get:ao,set(r,e){return console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,r),!0},deleteProperty(r,e){return console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,r),!0}},us=r=>rr(r)?fs(r):r,ds=r=>rr(r)?ci(r):r,hs=r=>r,sr=r=>Reflect.getPrototypeOf(r);function Ct(r,e,t=!1,s=!1){r=r.__v_raw;const n=R(r),i=R(e);e!==i&&!t&&G(n,"get",e),!t&&G(n,"get",i);const{has:a}=sr(n),o=s?hs:t?ds:us;if(a.call(n,e))return o(r.get(e));if(a.call(n,i))return o(r.get(i));r!==n&&r.get(e)}function jt(r,e=!1){const t=this.__v_raw,s=R(t),n=R(r);return r!==n&&!e&&G(s,"has",r),!e&&G(s,"has",n),r===n?t.has(r):t.has(r)||t.has(n)}function $t(r,e=!1){return r=r.__v_raw,!e&&G(R(r),"iterate",Te),Reflect.get(r,"size",r)}function Os(r){r=R(r);const e=R(this);return sr(e).has.call(e,r)||(e.add(r),fe(e,"add",r,r)),this}function As(r,e){e=R(e);const t=R(this),{has:s,get:n}=sr(t);let i=s.call(t,r);i?ii(t,s,r):(r=R(r),i=s.call(t,r));const a=n.call(t,r);return t.set(r,e),i?Qn(e,a)&&fe(t,"set",r,e,a):fe(t,"add",r,e),this}function Cs(r){const e=R(this),{has:t,get:s}=sr(e);let n=t.call(e,r);n?ii(e,t,r):(r=R(r),n=t.call(e,r));const i=s?s.call(e,r):void 0,a=e.delete(r);return n&&fe(e,"delete",r,void 0,i),a}function js(){const r=R(this),e=r.size!==0,t=at(r)?new Map(r):new Set(r),s=r.clear();return e&&fe(r,"clear",void 0,void 0,t),s}function It(r,e){return function(s,n){const i=this,a=i.__v_raw,o=R(a),c=e?hs:r?ds:us;return!r&&G(o,"iterate",Te),a.forEach((l,u)=>s.call(n,c(l),c(u),i))}}function Rt(r,e,t){return function(...s){const n=this.__v_raw,i=R(n),a=at(i),o=r==="entries"||r===Symbol.iterator&&a,c=r==="keys"&&a,l=n[r](...s),u=t?hs:e?ds:us;return!e&&G(i,"iterate",c?Pr:Te),{next(){const{value:d,done:h}=l.next();return h?{value:d,done:h}:{value:o?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function ie(r){return function(...e){{const t=e[0]?`on key "${e[0]}" `:"";console.warn(`${Ga(r)} operation ${t}failed: target is readonly.`,R(this))}return r==="delete"?!1:this}}function go(){const r={get(i){return Ct(this,i)},get size(){return $t(this)},has:jt,add:Os,set:As,delete:Cs,clear:js,forEach:It(!1,!1)},e={get(i){return Ct(this,i,!1,!0)},get size(){return $t(this)},has:jt,add:Os,set:As,delete:Cs,clear:js,forEach:It(!1,!0)},t={get(i){return Ct(this,i,!0)},get size(){return $t(this,!0)},has(i){return jt.call(this,i,!0)},add:ie("add"),set:ie("set"),delete:ie("delete"),clear:ie("clear"),forEach:It(!0,!1)},s={get(i){return Ct(this,i,!0,!0)},get size(){return $t(this,!0)},has(i){return jt.call(this,i,!0)},add:ie("add"),set:ie("set"),delete:ie("delete"),clear:ie("clear"),forEach:It(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=Rt(i,!1,!1),t[i]=Rt(i,!0,!1),e[i]=Rt(i,!1,!0),s[i]=Rt(i,!0,!0)}),[r,t,e,s]}var[mo,yo,vo,bo]=go();function ni(r,e){const t=e?r?bo:vo:r?yo:mo;return(s,n,i)=>n==="__v_isReactive"?!r:n==="__v_isReadonly"?r:n==="__v_raw"?s:Reflect.get(tr(t,n)&&n in s?t:s,n,i)}var wo={get:ni(!1,!1)},xo={get:ni(!0,!1)};function ii(r,e,t){const s=R(t);if(s!==t&&e.call(r,s)){const n=Xn(r);console.warn(`Reactive ${n} contains both the raw and reactive versions of the same object${n==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var ai=new WeakMap,ko=new WeakMap,oi=new WeakMap,So=new WeakMap;function To(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Eo(r){return r.__v_skip||!Object.isExtensible(r)?0:To(Xn(r))}function fs(r){return r&&r.__v_isReadonly?r:li(r,!1,po,wo,ai)}function ci(r){return li(r,!0,_o,xo,oi)}function li(r,e,t,s,n){if(!rr(r))return console.warn(`value cannot be made reactive: ${String(r)}`),r;if(r.__v_raw&&!(e&&r.__v_isReactive))return r;const i=n.get(r);if(i)return i;const a=Eo(r);if(a===0)return r;const o=new Proxy(r,a===2?s:t);return n.set(r,o),o}function R(r){return r&&R(r.__v_raw)||r}function Lr(r){return!!(r&&r.__v_isRef===!0)}X("nextTick",()=>is);X("dispatch",r=>it.bind(it,r));X("watch",(r,{evaluateLater:e,cleanup:t})=>(s,n)=>{let i=e(s),o=on(()=>{let c;return i(l=>c=l),c},n);t(o)});X("store",Ua);X("data",r=>wn(r));X("root",r=>Xt(r));X("refs",r=>(r._x_refs_proxy||(r._x_refs_proxy=Tt(Oo(r))),r._x_refs_proxy));function Oo(r){let e=[];return kt(r,t=>{t._x_refs&&e.push(t._x_refs)}),e}var ur={};function ui(r){return ur[r]||(ur[r]=0),++ur[r]}function Ao(r,e){return kt(r,t=>{if(t._x_ids&&t._x_ids[e])return!0})}function Co(r,e){r._x_ids||(r._x_ids={}),r._x_ids[e]||(r._x_ids[e]=ui(e))}X("id",(r,{cleanup:e})=>(t,s=null)=>{let n=`${t}${s?`-${s}`:""}`;return jo(r,n,e,()=>{let i=Ao(r,t),a=i?i._x_ids[t]:ui(t);return s?`${t}-${a}-${s}`:`${t}-${a}`})});er((r,e)=>{r._x_id&&(e._x_id=r._x_id)});function jo(r,e,t,s){if(r._x_id||(r._x_id={}),r._x_id[e])return r._x_id[e];let n=s();return r._x_id[e]=n,t(()=>{delete r._x_id[e]}),n}X("el",r=>r);di("Focus","focus","focus");di("Persist","persist","persist");function di(r,e,t){X(e,s=>J(`You can't use [$${e}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${t}`,s))}L("modelable",(r,{expression:e},{effect:t,evaluateLater:s,cleanup:n})=>{let i=s(e),a=()=>{let u;return i(d=>u=d),u},o=s(`${e} = __placeholder`),c=u=>o(()=>{},{scope:{__placeholder:u}}),l=a();c(l),queueMicrotask(()=>{if(!r._x_model)return;r._x_removeModelListeners.default();let u=r._x_model.get,d=r._x_model.set,h=Kn({get(){return u()},set(_){d(_)}},{get(){return a()},set(_){c(_)}});n(h)})});L("teleport",(r,{modifiers:e,expression:t},{cleanup:s})=>{r.tagName.toLowerCase()!=="template"&&J("x-teleport can only be used on a <template> tag",r);let n=$s(t),i=r.content.cloneNode(!0).firstElementChild;r._x_teleport=i,i._x_teleportBack=r,r.setAttribute("data-teleport-template",!0),i.setAttribute("data-teleport-target",!0),r._x_forwardEvents&&r._x_forwardEvents.forEach(o=>{i.addEventListener(o,c=>{c.stopPropagation(),r.dispatchEvent(new c.constructor(c.type,c))})}),St(i,{},r);let a=(o,c,l)=>{l.includes("prepend")?c.parentNode.insertBefore(o,c):l.includes("append")?c.parentNode.insertBefore(o,c.nextSibling):c.appendChild(o)};N(()=>{a(i,n,e),se(i),i._x_ignore=!0}),r._x_teleportPutBack=()=>{let o=$s(t);N(()=>{a(r._x_teleport,o,e)})},s(()=>i.remove())});var $o=document.createElement("div");function $s(r){let e=$e(()=>document.querySelector(r),()=>$o)();return e||J(`Cannot find x-teleport element for selector: "${r}"`),e}var hi=()=>{};hi.inline=(r,{modifiers:e},{cleanup:t})=>{e.includes("self")?r._x_ignoreSelf=!0:r._x_ignore=!0,t(()=>{e.includes("self")?delete r._x_ignoreSelf:delete r._x_ignore})};L("ignore",hi);L("effect",$e((r,{expression:e},{effect:t})=>{t(M(r,e))}));function Nr(r,e,t,s){let n=r,i=c=>s(c),a={},o=(c,l)=>u=>l(c,u);if(t.includes("dot")&&(e=Io(e)),t.includes("camel")&&(e=Ro(e)),t.includes("passive")&&(a.passive=!0),t.includes("capture")&&(a.capture=!0),t.includes("window")&&(n=window),t.includes("document")&&(n=document),t.includes("debounce")){let c=t[t.indexOf("debounce")+1]||"invalid-wait",l=zt(c.split("ms")[0])?Number(c.split("ms")[0]):250;i=Vn(i,l)}if(t.includes("throttle")){let c=t[t.indexOf("throttle")+1]||"invalid-wait",l=zt(c.split("ms")[0])?Number(c.split("ms")[0]):250;i=Jn(i,l)}return t.includes("prevent")&&(i=o(i,(c,l)=>{l.preventDefault(),c(l)})),t.includes("stop")&&(i=o(i,(c,l)=>{l.stopPropagation(),c(l)})),t.includes("self")&&(i=o(i,(c,l)=>{l.target===r&&c(l)})),(t.includes("away")||t.includes("outside"))&&(n=document,i=o(i,(c,l)=>{r.contains(l.target)||l.target.isConnected!==!1&&(r.offsetWidth<1&&r.offsetHeight<1||r._x_isShown!==!1&&c(l))})),t.includes("once")&&(i=o(i,(c,l)=>{c(l),n.removeEventListener(e,i,a)})),i=o(i,(c,l)=>{Lo(e)&&No(l,t)||c(l)}),n.addEventListener(e,i,a),()=>{n.removeEventListener(e,i,a)}}function Io(r){return r.replace(/-/g,".")}function Ro(r){return r.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function zt(r){return!Array.isArray(r)&&!isNaN(r)}function Po(r){return[" ","_"].includes(r)?r:r.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Lo(r){return["keydown","keyup"].includes(r)}function No(r,e){let t=e.filter(i=>!["window","document","prevent","stop","once","capture"].includes(i));if(t.includes("debounce")){let i=t.indexOf("debounce");t.splice(i,zt((t[i+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.includes("throttle")){let i=t.indexOf("throttle");t.splice(i,zt((t[i+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.length===0||t.length===1&&Is(r.key).includes(t[0]))return!1;const n=["ctrl","shift","alt","meta","cmd","super"].filter(i=>t.includes(i));return t=t.filter(i=>!n.includes(i)),!(n.length>0&&n.filter(a=>((a==="cmd"||a==="super")&&(a="meta"),r[`${a}Key`])).length===n.length&&Is(r.key).includes(t[0]))}function Is(r){if(!r)return[];r=Po(r);let e={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return e[r]=r,Object.keys(e).map(t=>{if(e[t]===r)return t}).filter(t=>t)}L("model",(r,{modifiers:e,expression:t},{effect:s,cleanup:n})=>{let i=r;e.includes("parent")&&(i=r.parentNode);let a=M(i,t),o;typeof t=="string"?o=M(i,`${t} = __placeholder`):typeof t=="function"&&typeof t()=="string"?o=M(i,`${t()} = __placeholder`):o=()=>{};let c=()=>{let h;return a(_=>h=_),Ps(h)?h.get():h},l=h=>{let _;a(w=>_=w),Ps(_)?_.set(h):o(()=>{},{scope:{__placeholder:h}})};typeof t=="string"&&r.type==="radio"&&N(()=>{r.hasAttribute("name")||r.setAttribute("name",t)});var u=r.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(r.type)||e.includes("lazy")?"change":"input";let d=he?()=>{}:Nr(r,u,e,h=>{l(Rs(r,e,h,c()))});if(e.includes("fill")&&([void 0,null,""].includes(c())||r.type==="checkbox"&&Array.isArray(c()))&&l(Rs(r,e,{target:r},c())),r._x_removeModelListeners||(r._x_removeModelListeners={}),r._x_removeModelListeners.default=d,n(()=>r._x_removeModelListeners.default()),r.form){let h=Nr(r.form,"reset",[],_=>{is(()=>r._x_model&&r._x_model.set(r.value))});n(()=>h())}r._x_model={get(){return c()},set(h){l(h)}},r._x_forceModelUpdate=h=>{h===void 0&&typeof t=="string"&&t.match(/\./)&&(h=""),window.fromModel=!0,N(()=>Bn(r,"value",h)),delete window.fromModel},s(()=>{let h=c();e.includes("unintrusive")&&document.activeElement.isSameNode(r)||r._x_forceModelUpdate(h)})});function Rs(r,e,t,s){return N(()=>{if(t instanceof CustomEvent&&t.detail!==void 0)return t.detail!==null&&t.detail!==void 0?t.detail:t.target.value;if(r.type==="checkbox")if(Array.isArray(s)){let n=null;return e.includes("number")?n=dr(t.target.value):e.includes("boolean")?n=Ut(t.target.value):n=t.target.value,t.target.checked?s.concat([n]):s.filter(i=>!Do(i,n))}else return t.target.checked;else{if(r.tagName.toLowerCase()==="select"&&r.multiple)return e.includes("number")?Array.from(t.target.selectedOptions).map(n=>{let i=n.value||n.text;return dr(i)}):e.includes("boolean")?Array.from(t.target.selectedOptions).map(n=>{let i=n.value||n.text;return Ut(i)}):Array.from(t.target.selectedOptions).map(n=>n.value||n.text);{let n;return r.type==="radio"?t.target.checked?n=t.target.value:n=s:n=t.target.value,e.includes("number")?dr(n):e.includes("boolean")?Ut(n):e.includes("trim")?n.trim():n}}})}function dr(r){let e=r?parseFloat(r):null;return Uo(e)?e:r}function Do(r,e){return r==e}function Uo(r){return!Array.isArray(r)&&!isNaN(r)}function Ps(r){return r!==null&&typeof r=="object"&&typeof r.get=="function"&&typeof r.set=="function"}L("cloak",r=>queueMicrotask(()=>N(()=>r.removeAttribute(We("cloak")))));hn(()=>`[${We("init")}]`);L("init",$e((r,{expression:e},{evaluate:t})=>typeof e=="string"?!!e.trim()&&t(e,{},!1):t(e,{},!1)));L("text",(r,{expression:e},{effect:t,evaluateLater:s})=>{let n=s(e);t(()=>{n(i=>{N(()=>{r.textContent=i})})})});L("html",(r,{expression:e},{effect:t,evaluateLater:s})=>{let n=s(e);t(()=>{n(i=>{N(()=>{r.innerHTML=i,r._x_ignoreSelf=!0,se(r),delete r._x_ignoreSelf})})})});ss($n(":",In(We("bind:"))));var fi=(r,{value:e,modifiers:t,expression:s,original:n},{effect:i,cleanup:a})=>{if(!e){let c={};Za(c),M(r,s)(u=>{Wn(r,u,n)},{scope:c});return}if(e==="key")return Mo(r,s);if(r._x_inlineBindings&&r._x_inlineBindings[e]&&r._x_inlineBindings[e].extract)return;let o=M(r,s);i(()=>o(c=>{c===void 0&&typeof s=="string"&&s.match(/\./)&&(c=""),N(()=>Bn(r,e,c,t))})),a(()=>{r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedStyles&&r._x_undoAddedStyles()})};fi.inline=(r,{value:e,modifiers:t,expression:s})=>{e&&(r._x_inlineBindings||(r._x_inlineBindings={}),r._x_inlineBindings[e]={expression:s,extract:!1})};L("bind",fi);function Mo(r,e){r._x_keyExpression=e}dn(()=>`[${We("data")}]`);L("data",(r,{expression:e},{cleanup:t})=>{if(Zo(r))return;e=e===""?"{}":e;let s={};Sr(s,r);let n={};za(n,s);let i=ke(r,e,{scope:n});(i===void 0||i===!0)&&(i={}),Sr(i,r);let a=Ke(i);xn(a);let o=St(r,a);a.init&&ke(r,a.init),t(()=>{a.destroy&&ke(r,a.destroy),o()})});er((r,e)=>{r._x_dataStack&&(e._x_dataStack=r._x_dataStack,e.setAttribute("data-has-alpine-state",!0))});function Zo(r){return he?Ir?!0:r.hasAttribute("data-has-alpine-state"):!1}L("show",(r,{modifiers:e,expression:t},{effect:s})=>{let n=M(r,t);r._x_doHide||(r._x_doHide=()=>{N(()=>{r.style.setProperty("display","none",e.includes("important")?"important":void 0)})}),r._x_doShow||(r._x_doShow=()=>{N(()=>{r.style.length===1&&r.style.display==="none"?r.removeAttribute("style"):r.style.removeProperty("display")})});let i=()=>{r._x_doHide(),r._x_isShown=!1},a=()=>{r._x_doShow(),r._x_isShown=!0},o=()=>setTimeout(a),c=jr(d=>d?a():i(),d=>{typeof r._x_toggleAndCascadeWithTransitions=="function"?r._x_toggleAndCascadeWithTransitions(r,d,a,i):d?o():i()}),l,u=!0;s(()=>n(d=>{!u&&d===l||(e.includes("immediate")&&(d?o():i()),c(d),l=d,u=!1)}))});L("for",(r,{expression:e},{effect:t,cleanup:s})=>{let n=zo(e),i=M(r,n.items),a=M(r,r._x_keyExpression||"index");r._x_prevKeys=[],r._x_lookup={},t(()=>Bo(r,n,i,a)),s(()=>{Object.values(r._x_lookup).forEach(o=>o.remove()),delete r._x_prevKeys,delete r._x_lookup})});function Bo(r,e,t,s){let n=a=>typeof a=="object"&&!Array.isArray(a),i=r;t(a=>{qo(a)&&a>=0&&(a=Array.from(Array(a).keys(),p=>p+1)),a===void 0&&(a=[]);let o=r._x_lookup,c=r._x_prevKeys,l=[],u=[];if(n(a))a=Object.entries(a).map(([p,k])=>{let C=Ls(e,k,p,a);s($=>{u.includes($)&&J("Duplicate key on x-for",r),u.push($)},{scope:{index:p,...C}}),l.push(C)});else for(let p=0;p<a.length;p++){let k=Ls(e,a[p],p,a);s(C=>{u.includes(C)&&J("Duplicate key on x-for",r),u.push(C)},{scope:{index:p,...k}}),l.push(k)}let d=[],h=[],_=[],w=[];for(let p=0;p<c.length;p++){let k=c[p];u.indexOf(k)===-1&&_.push(k)}c=c.filter(p=>!_.includes(p));let T="template";for(let p=0;p<u.length;p++){let k=u[p],C=c.indexOf(k);if(C===-1)c.splice(p,0,k),d.push([T,p]);else if(C!==p){let $=c.splice(p,1)[0],j=c.splice(C-1,1)[0];c.splice(p,0,j),c.splice(C,0,$),h.push([$,j])}else w.push(k);T=k}for(let p=0;p<_.length;p++){let k=_[p];o[k]._x_effects&&o[k]._x_effects.forEach(nn),o[k].remove(),o[k]=null,delete o[k]}for(let p=0;p<h.length;p++){let[k,C]=h[p],$=o[k],j=o[C],q=document.createElement("div");N(()=>{j||J('x-for ":key" is undefined or invalid',i,C,o),j.after(q),$.after(j),j._x_currentIfEl&&j.after(j._x_currentIfEl),q.before($),$._x_currentIfEl&&$.after($._x_currentIfEl),q.remove()}),j._x_refreshXForScope(l[u.indexOf(C)])}for(let p=0;p<d.length;p++){let[k,C]=d[p],$=k==="template"?i:o[k];$._x_currentIfEl&&($=$._x_currentIfEl);let j=l[C],q=u[C],Xe=document.importNode(i.content,!0).firstElementChild,bs=Ke(j);St(Xe,bs,i),Xe._x_refreshXForScope=Ni=>{Object.entries(Ni).forEach(([Di,Ui])=>{bs[Di]=Ui})},N(()=>{$.after(Xe),$e(()=>se(Xe))()}),typeof q=="object"&&J("x-for key cannot be an object, it must be a string or an integer",i),o[q]=Xe}for(let p=0;p<w.length;p++)o[w[p]]._x_refreshXForScope(l[u.indexOf(w[p])]);i._x_prevKeys=u})}function zo(r){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,t=/^\s*\(|\)\s*$/g,s=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,n=r.match(s);if(!n)return;let i={};i.items=n[2].trim();let a=n[1].replace(t,"").trim(),o=a.match(e);return o?(i.item=a.replace(e,"").trim(),i.index=o[1].trim(),o[2]&&(i.collection=o[2].trim())):i.item=a,i}function Ls(r,e,t,s){let n={};return/^\[.*\]$/.test(r.item)&&Array.isArray(e)?r.item.replace("[","").replace("]","").split(",").map(a=>a.trim()).forEach((a,o)=>{n[a]=e[o]}):/^\{.*\}$/.test(r.item)&&!Array.isArray(e)&&typeof e=="object"?r.item.replace("{","").replace("}","").split(",").map(a=>a.trim()).forEach(a=>{n[a]=e[a]}):n[r.item]=e,r.index&&(n[r.index]=t),r.collection&&(n[r.collection]=s),n}function qo(r){return!Array.isArray(r)&&!isNaN(r)}function pi(){}pi.inline=(r,{expression:e},{cleanup:t})=>{let s=Xt(r);s._x_refs||(s._x_refs={}),s._x_refs[e]=r,t(()=>delete s._x_refs[e])};L("ref",pi);L("if",(r,{expression:e},{effect:t,cleanup:s})=>{r.tagName.toLowerCase()!=="template"&&J("x-if can only be used on a <template> tag",r);let n=M(r,e),i=()=>{if(r._x_currentIfEl)return r._x_currentIfEl;let o=r.content.cloneNode(!0).firstElementChild;return St(o,{},r),N(()=>{r.after(o),$e(()=>se(o))()}),r._x_currentIfEl=o,r._x_undoIf=()=>{de(o,c=>{c._x_effects&&c._x_effects.forEach(nn)}),o.remove(),delete r._x_currentIfEl},o},a=()=>{r._x_undoIf&&(r._x_undoIf(),delete r._x_undoIf)};t(()=>n(o=>{o?i():a()})),s(()=>r._x_undoIf&&r._x_undoIf())});L("id",(r,{expression:e},{evaluate:t})=>{t(e).forEach(n=>Co(r,n))});er((r,e)=>{r._x_ids&&(e._x_ids=r._x_ids)});ss($n("@",In(We("on:"))));L("on",$e((r,{value:e,modifiers:t,expression:s},{cleanup:n})=>{let i=s?M(r,s):()=>{};r.tagName.toLowerCase()==="template"&&(r._x_forwardEvents||(r._x_forwardEvents=[]),r._x_forwardEvents.includes(e)||r._x_forwardEvents.push(e));let a=Nr(r,e,t,o=>{i(()=>{},{scope:{$event:o},params:[o]})});n(()=>a())}));nr("Collapse","collapse","collapse");nr("Intersect","intersect","intersect");nr("Focus","trap","focus");nr("Mask","mask","mask");function nr(r,e,t){L(e,s=>J(`You can't use [x-${e}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${t}`,s))}Et.setEvaluator(On);Et.setReactivityEngine({reactive:fs,effect:Xa,release:Qa,raw:R});var Fo=Et,Ge=Fo;function Vo(r){let e=()=>{let t,s;try{s=localStorage}catch(n){console.error(n),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let i=new Map;s={getItem:i.get.bind(i),setItem:i.set.bind(i)}}return r.interceptor((n,i,a,o,c)=>{let l=t||`_x_${o}`,u=Ns(l,s)?Ds(l,s):n;return a(u),r.effect(()=>{let d=i();Us(l,d,s),a(d)}),u},n=>{n.as=i=>(t=i,n),n.using=i=>(s=i,n)})};Object.defineProperty(r,"$persist",{get:()=>e()}),r.magic("persist",e),r.persist=(t,{get:s,set:n},i=localStorage)=>{let a=Ns(t,i)?Ds(t,i):s();n(a),r.effect(()=>{let o=s();Us(t,o,i),n(o)})}}function Ns(r,e){return e.getItem(r)!==null}function Ds(r,e){let t=e.getItem(r,e);if(t!==void 0)return JSON.parse(t)}function Us(r,e,t){t.setItem(r,JSON.stringify(e))}var Jo=Vo;const Ko="modulepreload",Ho=function(r){return"/"+r},Ms={},qe=function(e,t,s){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=Ho(i),i in Ms)return;Ms[i]=!0;const a=i.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!s)for(let u=n.length-1;u>=0;u--){const d=n[u];if(d.href===i&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Ko,a||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),a)return new Promise((u,d)=>{l.addEventListener("load",u),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Wo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>qe(()=>Promise.resolve().then(()=>Ot),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class ps extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Go extends ps{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yo extends ps{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xo extends ps{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Dr;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Dr||(Dr={}));var Qo=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class ec{constructor(e,{headers:t={},customFetch:s,region:n=Dr.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Wo(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Qo(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let o={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let l;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData<"u"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:l}).catch(w=>{throw new Go(w)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new Yo(u);if(!u.ok)throw new Xo(u);let h=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return h==="application/json"?_=yield u.json():h==="application/octet-stream"?_=yield u.blob():h==="multipart/form-data"?_=yield u.formData():_=yield u.text(),{data:_,error:null}}catch(n){return{data:null,error:n}}})}}var tc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fe=tc();const rc=Fe.fetch,_s=Fe.fetch.bind(Fe),_i=Fe.Headers,sc=Fe.Request,nc=Fe.Response,Ot=Object.freeze(Object.defineProperty({__proto__:null,Headers:_i,Request:sc,Response:nc,default:_s,fetch:rc},Symbol.toStringTag,{value:"Module"}));class ic extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class ac{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=_s:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,c;let l=null,u=null,d=null,h=i.status,_=i.statusText;if(i.ok){if(this.method!=="HEAD"){const k=await i.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=k:u=JSON.parse(k))}const T=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),p=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");T&&p&&p.length>1&&(d=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,_="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const T=await i.text();try{l=JSON.parse(T),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,_="OK")}catch{i.status===404&&T===""?(h=204,_="No Content"):l={message:T}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,_="OK"),l&&this.shouldThrowOnError)throw new ic(l)}return{error:l,data:u,count:d,status:h,statusText:_}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,o,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}}class oc extends ac{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var o;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class De extends oc{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class cc{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new De({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(a.length>0){const o=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new De({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new De({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new De({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new De({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const lc="1.15.0",uc={"X-Client-Info":`postgrest-js/${lc}`};class gs{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},uc),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new cc(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gs(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let c;s?(a="HEAD",Object.entries(t).forEach(([u,d])=>{o.searchParams.append(u,`${d}`)})):n?(a="GET",Object.entries(t).forEach(([u,d])=>{o.searchParams.append(u,`${d}`)})):(a="POST",c=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new De({method:a,url:o,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}}const dc="2.9.3",hc={"X-Client-Info":`realtime-js/${dc}`},fc="1.0.0",gi=1e4,pc=1e3;var Me;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Me||(Me={}));var B;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(B||(B={}));var V;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(V||(V={}));var Ur;(function(r){r.websocket="websocket"})(Ur||(Ur={}));var be;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(be||(be={}));class mi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class _c{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+n));a=a+n;const c=s.decode(e.slice(a,a+i));a=a+i;const l=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:l}}}class hr{constructor(e,t,s={},n=gi){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zs;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Zs||(Zs={}));class ot{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ot.syncState(this.state,n,i,a),this.pendingDiffs.forEach(c=>{this.state=ot.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ot.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(i,(l,u)=>{a[l]||(c[l]=u)}),this.map(a,(l,u)=>{const d=i[l];if(d){const h=u.map(p=>p.presence_ref),_=d.map(p=>p.presence_ref),w=u.filter(p=>_.indexOf(p.presence_ref)<0),T=d.filter(p=>h.indexOf(p.presence_ref)<0);w.length>0&&(o[l]=w),T.length>0&&(c[l]=T)}else o[l]=u}),this.syncDiff(i,{joins:o,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(o,c)=>{var l;const u=(l=e[o])!==null&&l!==void 0?l:[];if(e[o]=this.cloneDeep(c),u.length>0){const d=e[o].map(_=>_.presence_ref),h=u.filter(_=>d.indexOf(_.presence_ref)<0);e[o].unshift(...h)}s(o,u,c)}),this.map(a,(o,c)=>{let l=e[o];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=l,n(o,l,c),l.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var I;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(I||(I={}));const Bs=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=gc(a,r,e,n),i),{})},gc=(r,e,t,s)=>{const n=e.find(o=>o.name===r),i=n==null?void 0:n.type,a=t[r];return i&&!s.includes(i)?yi(i,a):Mr(a)},yi=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return bc(e,t)}switch(r){case I.bool:return mc(e);case I.float4:case I.float8:case I.int2:case I.int4:case I.int8:case I.numeric:case I.oid:return yc(e);case I.json:case I.jsonb:return vc(e);case I.timestamp:return wc(e);case I.abstime:case I.date:case I.daterange:case I.int4range:case I.int8range:case I.money:case I.reltime:case I.text:case I.time:case I.timestamptz:case I.timetz:case I.tsrange:case I.tstzrange:return Mr(e);default:return Mr(e)}},Mr=r=>r,mc=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},yc=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},vc=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},bc=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>yi(e,o))}return r},wc=r=>typeof r=="string"?r.replace(" ","T"):r;var zs;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(zs||(zs={}));var qs;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(qs||(qs={}));var Fs;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Fs||(Fs={}));class ms{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=B.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new hr(this,V.join,this.params,this.timeout),this.rejoinTimer=new mi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=B.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=B.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=B.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=B.errored,this.rejoinTimer.scheduleTimeout())}),this._on(V.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new ot(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));const o={},c={broadcast:i,presence:a,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(l=>l.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,h=(u=d==null?void 0:d.length)!==null&&u!==void 0?u:0,_=[];for(let w=0;w<h;w++){const T=d[w],{filter:{event:p,schema:k,table:C,filter:$}}=T,j=l&&l[w];if(j&&j.event===p&&j.schema===k&&j.table===C&&j.filter===$)_.push(Object.assign(Object.assign({},T),{id:j.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,o={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=t.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=B.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(V.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new hr(this,V.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new hr(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:l,join:u}=V;if(s&&[o,c,l,u].indexOf(a)>=0&&s!==this._joinRef())return;let h=this._onMessage(a,t,s);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(_=>{var w,T,p;return((w=_.filter)===null||w===void 0?void 0:w.event)==="*"||((p=(T=_.filter)===null||T===void 0?void 0:T.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===a}).map(_=>_.callback(h,s)):(i=this.bindings[a])===null||i===void 0||i.filter(_=>{var w,T,p,k,C,$;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in _){const j=_.id,q=(w=_.filter)===null||w===void 0?void 0:w.event;return j&&((T=t.ids)===null||T===void 0?void 0:T.includes(j))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const j=(C=(k=_==null?void 0:_.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return j==="*"||j===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===a}).map(_=>{if(typeof h=="object"&&"ids"in h){const w=h.data,{schema:T,table:p,commit_timestamp:k,type:C,errors:$}=w;h=Object.assign(Object.assign({},{schema:T,table:p,commit_timestamp:k,eventType:C,new:{},old:{},errors:$}),this._getPayloadRecords(w))}_.callback(h,s)})}_isClosed(){return this.state===B.closed}_isJoined(){return this.state===B.joined}_isJoining(){return this.state===B.joining}_isLeaving(){return this.state===B.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&ms.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(V.close,{},e)}_onError(e){this._on(V.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=B.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Bs(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Bs(e.columns,e.old_record)),t}}const xc=()=>{},kc=typeof WebSocket<"u";class Sc{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=hc,this.params={},this.timeout=gi,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=xc,this.conn=null,this.sendBuffer=[],this.serializer=new _c,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>qe(()=>Promise.resolve().then(()=>Ot),void 0).then(({default:c})=>c(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Ur.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(kc){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Tc(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),qe(()=>import("./browser-06aa05b2.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Me.connecting:return be.Connecting;case Me.open:return be.Open;case Me.closing:return be.Closing;default:return be.Closed}}isConnected(){return this.connectionState()===be.Open}channel(e,t={config:{}}){const s=new ms(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(V.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fc}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:a}=t;(a&&a===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(V.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(pc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Tc{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Me.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class ys extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function D(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Ec extends ys{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Vs extends ys{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Oc=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const vi=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>qe(()=>Promise.resolve().then(()=>Ot),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Ac=()=>Oc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qe(()=>Promise.resolve().then(()=>Ot),void 0)).Response:Response});var Ye=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const fr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Cc=(r,e)=>Ye(void 0,void 0,void 0,function*(){const t=yield Ac();r instanceof t?r.json().then(s=>{e(new Ec(fr(s),r.status||500))}).catch(s=>{e(new Vs(fr(s),s))}):e(new Vs(fr(r),r))}),jc=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};function ir(r,e,t,s,n,i){return Ye(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,jc(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Cc(c,o))})})}function Zr(r,e,t,s){return Ye(this,void 0,void 0,function*(){return ir(r,"GET",e,t,s)})}function oe(r,e,t,s,n){return Ye(this,void 0,void 0,function*(){return ir(r,"POST",e,s,n,t)})}function $c(r,e,t,s,n){return Ye(this,void 0,void 0,function*(){return ir(r,"PUT",e,s,n,t)})}function bi(r,e,t,s,n){return Ye(this,void 0,void 0,function*(){return ir(r,"DELETE",e,s,n,t)})}var z=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Ic={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Js={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Rc{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=vi(n)}uploadOrUpdate(e,t,s,n){return z(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Js),n),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl)):(i=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),d=yield u.json();return u.ok?{data:{path:c,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if(D(i))return{data:null,error:i};throw i}})}upload(e,t,s){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return z(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:Js.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(D(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e){return z(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield oe(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new ys("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}update(e,t,s){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return z(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}copy(e,t){return z(this,void 0,void 0,function*(){try{return{data:{path:(yield oe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return z(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield oe(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return z(this,void 0,void 0,function*(){try{const n=yield oe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}download(e,t){return z(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Zr(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(D(o))return{data:null,error:o};throw o}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${l}`)}}}remove(e){return z(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}list(e,t,s){return z(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ic),t),{prefix:e||""});return{data:yield oe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Pc="2.5.5",Lc={"X-Client-Info":`storage-js/${Pc}`};var Re=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class Nc{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Lc),t),this.fetch=vi(s)}listBuckets(){return Re(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}getBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield Zr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Re(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Re(this,void 0,void 0,function*(){try{return{data:yield $c(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}}class Dc extends Nc{constructor(e,t={},s){super(e,t,s)}from(e){return new Rc(this.url,this.headers,e,this.fetch)}}const Uc="2.42.0";let nt="";typeof Deno<"u"?nt="deno":typeof document<"u"?nt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nt="react-native":nt="node";const Mc={"X-Client-Info":`supabase-js-${nt}/${Uc}`},Zc={headers:Mc},Bc={schema:"public"},zc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qc={};var Fc=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Vc=r=>{let e;return r?e=r:typeof fetch>"u"?e=_s:e=fetch,(...t)=>e(...t)},Jc=()=>typeof Headers>"u"?_i:Headers,Kc=(r,e,t)=>{const s=Vc(t),n=Jc();return(i,a)=>Fc(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:r;let l=new n(a==null?void 0:a.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},a),{headers:l}))})};function Hc(r){return r.replace(/\/$/,"")}function Wc(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:a,auth:o,realtime:c,global:l}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},c),n),global:Object.assign(Object.assign({},l),i)}}const wi="2.63.0",Gc="http://localhost:9999",Yc="supabase.auth.token",Xc={"X-Client-Info":`gotrue-js/${wi}`},Ks=10,Br="X-Supabase-Api-Version",xi={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Qc(r){return Math.round(Date.now()/1e3)+r}function el(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const F=()=>typeof document<"u",me={tested:!1,writable:!1},ct=()=>{if(!F())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(me.tested)return me.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),me.tested=!0,me.writable=!0}catch{me.tested=!0,me.writable=!1}return me.writable};function pr(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const ki=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>qe(()=>Promise.resolve().then(()=>Ot),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},tl=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Si=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Pt=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},_r=async(r,e)=>{await r.removeItem(e)};function rl(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,i,a,o,c,l,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)a=e.indexOf(r.charAt(u++)),o=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),s=a<<2|o>>4,n=(o&15)<<4|c>>2,i=(c&3)<<6|l,t=t+String.fromCharCode(s),c!=64&&n!=0&&(t=t+String.fromCharCode(n)),l!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class ar{constructor(){this.promise=new ar.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ar.promiseConstructor=Promise;function Hs(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(rl(s))}async function sl(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function nl(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function il(r){return("0"+r.toString(16)).substr(-2)}function al(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,il).join("")}async function ol(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function cl(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ll(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await ol(r);return cl(t)}async function Pe(r,e,t=!1){const s=al();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Si(r,`${e}-code-verifier`,n);const i=await ll(s);return[i,s===i?"plain":"s256"]}const ul=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dl(r){const e=r.headers.get(Br);if(!e||!e.match(ul))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class vs extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function E(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class hl extends vs{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function fl(r){return E(r)&&r.name==="AuthApiError"}class Ti extends vs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ie extends vs{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Le extends Ie{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class gr extends Ie{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lt extends Ie{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Nt extends Ie{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ws extends Ie{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zr extends Ie{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function mr(r){return E(r)&&r.name==="AuthRetryableFetchError"}class Gs extends Ie{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var pl=globalThis&&globalThis.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const ve=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),_l=[502,503,504];async function Ys(r){var e;if(!tl(r))throw new zr(ve(r),0);if(_l.includes(r.status))throw new zr(ve(r),r.status);let t;try{t=await r.json()}catch(i){throw new Ti(ve(i),i)}let s;const n=dl(r);if(n&&n.getTime()>=xi["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Gs(ve(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Gs(ve(t),r.status,t.weak_password.reasons);throw new hl(ve(t),r.status||500,s)}const gl=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function O(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Br]||(i[Br]=xi["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await ml(r,e,t+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function ml(r,e,t,s,n,i){const a=gl(e,s,n,i);let o;try{o=await r(t,Object.assign(Object.assign({},a),{cache:"no-store"}))}catch(c){throw console.error(c),new zr(ve(c),0)}if(o.ok||await Ys(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await Ys(c)}}function ae(r){var e;let t=null;wl(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Qc(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Xs(r){const e=ae(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function ce(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function yl(r){return{data:r,error:null}}function vl(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,a=pl(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function bl(r){return r}function wl(r){return r.access_token&&r.refresh_token&&r.expires_in}var xl=globalThis&&globalThis.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class kl{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=ki(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await O(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(E(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await O(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ce})}catch(s){if(E(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=xl(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await O(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:vl,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(E(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await O(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ce})}catch(t){if(E(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,a,o,c;try{const l={nextPage:null,lastPage:0,total:0},u=await O(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:bl});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,_=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return _.length>0&&(_.forEach(w=>{const T=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(w.split(";")[1].split("=")[1]);l[`${p}Page`]=T}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(E(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await O(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ce})}catch(t){if(E(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await O(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ce})}catch(s){if(E(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await O(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ce})}catch(s){if(E(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await O(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(E(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await O(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(E(t))return{data:null,error:t};throw t}}}const Sl={getItem:r=>ct()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{ct()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{ct()&&globalThis.localStorage.removeItem(r)}};function Qs(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function Tl(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ne={debug:!!(globalThis&&ct()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ei extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class El extends Ei{}async function Ol(r,e,t){Ne.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ne.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Ne.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{Ne.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw Ne.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new El(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ne.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Tl();const Al={url:Gc,storageKey:Yc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xc,flowType:"implicit",debug:!1},rt=30*1e3,en=3;async function tn(r,e,t){return await t()}class ut{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.insecureGetSessionWarningShown=!1,this.instanceID=ut.nextInstanceID,ut.nextInstanceID+=1,this.instanceID>0&&F()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Al),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new kl({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ki(n.fetch),this.lock=n.lock||tn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,n.lock?this.lock=n.lock:F()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ol:this.lock=tn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:ct()?this.storage=Sl:(this.memoryStorage={},this.storage=Qs(this.memoryStorage)):(this.memoryStorage={},this.storage=Qs(this.memoryStorage)),F()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${wi}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=F()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:n,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return E(e)?{error:e}:{error:new Ti("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{await this._removeSession();const i=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:ae}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(E(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:d,options:h}=e;let _=null,w=null;this.flowType==="pkce"&&([_,w]=await Pe(this.storage,this.storageKey)),i=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:_,code_challenge_method:w},xform:ae})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(n=h==null?void 0:h.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ae})}else throw new Lt("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(E(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await O(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Xs})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await O(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Xs})}else throw new Lt("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new gr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(E(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Pt(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/"),{data:i,error:a}=await O(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ae});return await _r(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new gr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:n,access_token:i,nonce:a}=e,o=await O(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ae}),{data:c,error:l}=o;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new gr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(E(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Pe(this.storage,this.storageKey));const{error:d}=await O(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:c}=e,{data:l,error:u}=await O(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Lt("You must provide either an email or phone number.")}catch(o){if(E(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await O(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ae});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,l=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(n){if(E(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{await this._removeSession();let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Pe(this.storage,this.storageKey)),await O(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:yl})}catch(i){if(E(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Le;const{error:n}=await O(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(E(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await O(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:o}=await O(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Lt("You must provide either an email or phone number and a type")}catch(t){if(E(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;const e=await this._acquireLock(-1,async()=>this._useSession(async t=>t));return e.data&&this.storage.isServer&&(this.insecureGetSessionWarningShown||(console.warn("Using supabase.auth.getSession() is potentially insecure as it loads data directly from the storage medium (typically cookies) which may not be authentic. Prefer using supabase.auth.getUser() instead. To suppress this warning call supabase.auth.getUser() before you call supabase.auth.getSession()."),this.insecureGetSessionWarningShown=!0)),e}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Pt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let a=e.user;delete e.user,Object.defineProperty(e,"user",{enumerable:!0,get:()=>(e.__suppressUserWarning||console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a),set:o=>{a=o}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data&&this.storage.isServer&&(this.insecureGetSessionWarningShown=!0),t}async _getUser(e){try{return e?await O(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ce}):await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await O(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0,xform:ce})})}catch(t){if(E(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Le;const a=n.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await Pe(this.storage,this.storageKey));const{data:l,error:u}=await O(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:ce});if(u)throw u;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(E(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return Hs(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Le;const t=Date.now()/1e3;let s=t,n=!0,i=null;const a=Hs(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(E(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Le;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(E(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!F())throw new Nt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Nt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Ws("Not a valid PKCE flow url.");const t=pr(window.location.href);if(e){if(!t.code)throw new Ws("No code detected.");const{data:C,error:$}=await this._exchangeCodeForSession(t.code);if($)throw $;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:C.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Nt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:c,token_type:l}=t;if(!i||!o||!a||!l)throw new Nt("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(o);let h=u+d;c&&(h=parseInt(c));const _=h-u;_*1e3<=rt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${d}s`);const w=h-d;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,h,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",w,h,u);const{data:T,error:p}=await this._getUser(i);if(p)throw p;const k={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:h,refresh_token:a,token_type:l,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:t.type},error:null}}catch(t){if(E(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=pr(window.location.href);return!!(F()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=pr(window.location.href),t=await Pt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(fl(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await _r(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=el(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Pe(this.storage,this.storageKey,!0));try{return await O(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(E(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(E(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var a,o,c,l,u;const{data:d,error:h}=i;if(h)throw h;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await O(this.fetch,"GET",_,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return F()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(E(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await O(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(E(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await nl(async n=>(await sl(n*200),this._debug(t,"refreshing attempt",n),await O(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ae})),(n,i,a)=>a&&a.error&&mr(a.error)&&Date.now()+(n+1)*200-s<rt)}catch(s){if(this._debug(t,"error",s),E(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),F()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Pt(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+Ks;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Ks}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),mr(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Le;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ar;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Le;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),E(i)){const a={session:null,error:i};return mr(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await Si(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await _r(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&F()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/rt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${rt}ms, refresh threshold is ${en} ticks`),n<=en&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ei)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!F()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await Pe(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await O(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(E(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:c}=await O(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(!((n=o==null?void 0:o.totp)===null||n===void 0)&&n.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(E(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await O(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(E(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await O(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(E(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(n.access_token);let o=null;a.aal&&(o=a.aal);let c=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}ut.nextInstanceID=0;const Cl=ut;class jl extends Cl{constructor(e){super(e)}}var $l=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class Il{constructor(e,t,s){var n,i,a,o,c,l,u,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const h=Hc(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const _=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,w={db:Bc,realtime:qc,auth:Object.assign(Object.assign({},zc),{storageKey:_}),global:Zc},T=Wc(s??{},w);this.storageKey=(i=(n=T.auth)===null||n===void 0?void 0:n.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=(a=T.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((c=T.auth)!==null&&c!==void 0?c:{},this.headers,(l=T.global)===null||l===void 0?void 0:l.fetch),this.fetch=Kc(t,this._getAccessToken.bind(this),(u=T.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},T.realtime)),this.rest=new gs(`${h}/rest/v1`,{headers:this.headers,schema:(d=T.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new ec(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Dc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return $l(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,debug:o},c,l){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jl({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,debug:o,fetch:l})}_initRealtimeClient(e){return new Sc(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rl=(r,e,t)=>new Il(r,e,t),Pl={db:{schema:"public"},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"x-my-custom-header":"my-app-name"}}},Oi=Rl("https://mfufugiokobwxmtqflba.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1mdWZ1Z2lva29id3htdHFmbGJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDI5MzUwOTMsImV4cCI6MjAxODUxMTA5M30.I77uLa_EfkTl6ugLqeFXyB8sMNdrl1pETfLfvYo_haU",Pl);var A;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const i={};for(const a of n)i[a]=a;return i},r.getValidEnumValues=n=>{const i=r.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(const o of i)a[o]=n[o];return r.objectValues(a)},r.objectValues=n=>r.objectKeys(n).map(function(i){return n[i]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.push(a);return i},r.find=(n,i)=>{for(const a of n)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=s,r.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(A||(A={}));var qr;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(qr||(qr={}));const g=A.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),le=r=>{switch(typeof r){case"undefined":return g.undefined;case"string":return g.string;case"number":return isNaN(r)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":return Array.isArray(r)?g.array:r===null?g.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?g.promise:typeof Map<"u"&&r instanceof Map?g.map:typeof Set<"u"&&r instanceof Set?g.set:typeof Date<"u"&&r instanceof Date?g.date:g.object;default:return g.unknown}},f=A.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ll=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class H extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},s={_errors:[]},n=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(a))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return n(this),s}toString(){return this.message}get message(){return JSON.stringify(this.issues,A.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}H.create=r=>new H(r);const dt=(r,e)=>{let t;switch(r.code){case f.invalid_type:r.received===g.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case f.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,A.jsonStringifyReplacer)}`;break;case f.unrecognized_keys:t=`Unrecognized key(s) in object: ${A.joinValues(r.keys,", ")}`;break;case f.invalid_union:t="Invalid input";break;case f.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${A.joinValues(r.options)}`;break;case f.invalid_enum_value:t=`Invalid enum value. Expected ${A.joinValues(r.options)}, received '${r.received}'`;break;case f.invalid_arguments:t="Invalid function arguments";break;case f.invalid_return_type:t="Invalid function return type";break;case f.invalid_date:t="Invalid date";break;case f.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:A.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case f.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case f.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case f.custom:t="Invalid input";break;case f.invalid_intersection_types:t="Intersection results could not be merged";break;case f.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case f.not_finite:t="Number must be finite";break;default:t=e.defaultError,A.assertNever(r)}return{message:t}};let Ai=dt;function Nl(r){Ai=r}function qt(){return Ai}const Ft=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,i=[...t,...n.path||[]],a={...n,path:i};let o="";const c=s.filter(l=>!!l).slice().reverse();for(const l of c)o=l(a,{data:e,defaultError:o}).message;return{...n,path:i,message:n.message||o}},Dl=[];function m(r,e){const t=Ft({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qt(),dt].filter(s=>!!s)});r.common.issues.push(t)}class U{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return b;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t)s.push({key:await n.key,value:await n.value});return U.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:i,value:a}=n;if(i.status==="aborted"||a.status==="aborted")return b;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||n.alwaysSet)&&(s[i.value]=a.value)}return{status:e.value,value:s}}}const b=Object.freeze({status:"aborted"}),Ci=r=>({status:"dirty",value:r}),Z=r=>({status:"valid",value:r}),Fr=r=>r.status==="aborted",Vr=r=>r.status==="dirty",ht=r=>r.status==="valid",Vt=r=>typeof Promise<"u"&&r instanceof Promise;var y;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(y||(y={}));class ee{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const rn=(r,e)=>{if(ht(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new H(r.common.issues);return this._error=t,this._error}}};function x(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:s??o.defaultError}:{message:t??o.defaultError},description:n}}class S{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return le(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new U,ctx:{common:e.parent.common,data:e.data,parsedType:le(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Vt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:le(e)},i=this._parseSync({data:e,path:n.path,parent:n});return rn(n,i)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:le(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Vt(n)?n:Promise.resolve(n));return rn(s,i)}refine(e,t){const s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,i)=>{const a=e(n),o=()=>i.addIssue({code:f.custom,...s(n)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new Y({schema:this,typeName:v.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return re.create(this,this._def)}nullable(){return Ce.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return W.create(this,this._def)}promise(){return Je.create(this,this._def)}or(e){return gt.create([this,e],this._def)}and(e){return mt.create(this,e,this._def)}transform(e){return new Y({...x(this._def),schema:this,typeName:v.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new xt({...x(this._def),innerType:this,defaultValue:t,typeName:v.ZodDefault})}brand(){return new $i({typeName:v.ZodBranded,type:this,...x(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Wt({...x(this._def),innerType:this,catchValue:t,typeName:v.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return At.create(this,e)}readonly(){return Yt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ul=/^c[^\s-]{8,}$/i,Ml=/^[a-z][a-z0-9]*$/,Zl=/^[0-9A-HJKMNP-TV-Z]{26}$/,Bl=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zl=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ql="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let yr;const Fl=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Vl=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Jl=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Kl(r,e){return!!((e==="v4"||!e)&&Fl.test(r)||(e==="v6"||!e)&&Vl.test(r))}class K extends S{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==g.string){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_type,expected:g.string,received:i.parsedType}),b}const s=new U;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:f.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:f.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(n=this._getOrReturnCtx(e,n),a?m(n,{code:f.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&m(n,{code:f.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")zl.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"email",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")yr||(yr=new RegExp(ql,"u")),yr.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"emoji",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")Bl.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"uuid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")Ul.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"cuid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")Ml.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"cuid2",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")Zl.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"ulid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),m(n,{validation:"url",code:f.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"regex",code:f.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),m(n,{code:f.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),m(n,{code:f.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),m(n,{code:f.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?Jl(i).test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{code:f.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="ip"?Kl(e.data,i.version)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"ip",code:f.invalid_string,message:i.message}),s.dirty()):A.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:f.invalid_string,...y.errToObj(s)})}_addCheck(e){return new K({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...y.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...y.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...y.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...y.errToObj(t)})}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new K({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new K({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new K({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}K.create=r=>{var e;return new K({checks:[],typeName:v.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...x(r)})};function Hl(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,i=parseInt(r.toFixed(n).replace(".","")),a=parseInt(e.toFixed(n).replace(".",""));return i%a/Math.pow(10,n)}class pe extends S{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==g.number){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_type,expected:g.number,received:i.parsedType}),b}let s;const n=new U;for(const i of this._def.checks)i.kind==="int"?A.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),m(s,{code:f.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?Hl(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),m(s,{code:f.not_finite,message:i.message}),n.dirty()):A.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,s,n){return new pe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:y.toString(n)}]})}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&A.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}pe.create=r=>new pe({checks:[],typeName:v.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...x(r)});class _e extends S{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==g.bigint){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_type,expected:g.bigint,received:i.parsedType}),b}let s;const n=new U;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):A.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,s,n){return new _e({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:y.toString(n)}]})}_addCheck(e){return new _e({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}_e.create=r=>{var e;return new _e({checks:[],typeName:v.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...x(r)})};class ft extends S{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==g.boolean){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:g.boolean,received:s.parsedType}),b}return Z(e.data)}}ft.create=r=>new ft({typeName:v.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...x(r)});class Oe extends S{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==g.date){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_type,expected:g.date,received:i.parsedType}),b}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_date}),b}const s=new U;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:f.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:f.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):A.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Oe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Oe.create=r=>new Oe({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:v.ZodDate,...x(r)});class Jt extends S{_parse(e){if(this._getType(e)!==g.symbol){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:g.symbol,received:s.parsedType}),b}return Z(e.data)}}Jt.create=r=>new Jt({typeName:v.ZodSymbol,...x(r)});class pt extends S{_parse(e){if(this._getType(e)!==g.undefined){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:g.undefined,received:s.parsedType}),b}return Z(e.data)}}pt.create=r=>new pt({typeName:v.ZodUndefined,...x(r)});class _t extends S{_parse(e){if(this._getType(e)!==g.null){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:g.null,received:s.parsedType}),b}return Z(e.data)}}_t.create=r=>new _t({typeName:v.ZodNull,...x(r)});class Ve extends S{constructor(){super(...arguments),this._any=!0}_parse(e){return Z(e.data)}}Ve.create=r=>new Ve({typeName:v.ZodAny,...x(r)});class Ee extends S{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Z(e.data)}}Ee.create=r=>new Ee({typeName:v.ZodUnknown,...x(r)});class ne extends S{_parse(e){const t=this._getOrReturnCtx(e);return m(t,{code:f.invalid_type,expected:g.never,received:t.parsedType}),b}}ne.create=r=>new ne({typeName:v.ZodNever,...x(r)});class Kt extends S{_parse(e){if(this._getType(e)!==g.undefined){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:g.void,received:s.parsedType}),b}return Z(e.data)}}Kt.create=r=>new Kt({typeName:v.ZodVoid,...x(r)});class W extends S{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==g.array)return m(t,{code:f.invalid_type,expected:g.array,received:t.parsedType}),b;if(n.exactLength!==null){const a=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(a||o)&&(m(t,{code:a?f.too_big:f.too_small,minimum:o?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(m(t,{code:f.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(m(t,{code:f.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>n.type._parseAsync(new ee(t,a,t.path,o)))).then(a=>U.mergeArray(s,a));const i=[...t.data].map((a,o)=>n.type._parseSync(new ee(t,a,t.path,o)));return U.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new W({...this._def,minLength:{value:e,message:y.toString(t)}})}max(e,t){return new W({...this._def,maxLength:{value:e,message:y.toString(t)}})}length(e,t){return new W({...this._def,exactLength:{value:e,message:y.toString(t)}})}nonempty(e){return this.min(1,e)}}W.create=(r,e)=>new W({type:r,minLength:null,maxLength:null,exactLength:null,typeName:v.ZodArray,...x(e)});function Ue(r){if(r instanceof P){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=re.create(Ue(s))}return new P({...r._def,shape:()=>e})}else return r instanceof W?new W({...r._def,type:Ue(r.element)}):r instanceof re?re.create(Ue(r.unwrap())):r instanceof Ce?Ce.create(Ue(r.unwrap())):r instanceof te?te.create(r.items.map(e=>Ue(e))):r}class P extends S{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=A.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==g.object){const l=this._getOrReturnCtx(e);return m(l,{code:f.invalid_type,expected:g.object,received:l.parsedType}),b}const{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof ne&&this._def.unknownKeys==="strip"))for(const l in n.data)a.includes(l)||o.push(l);const c=[];for(const l of a){const u=i[l],d=n.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ee(n,d,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof ne){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(l==="strict")o.length>0&&(m(n,{code:f.unrecognized_keys,keys:o}),s.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const d=n.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ee(n,d,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>U.mergeObjectSync(s,l)):U.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new P({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,i,a,o;const c=(a=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=y.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new P({...this._def,unknownKeys:"strip"})}passthrough(){return new P({...this._def,unknownKeys:"passthrough"})}extend(e){return new P({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new P({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:v.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new P({...this._def,catchall:e})}pick(e){const t={};return A.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new P({...this._def,shape:()=>t})}omit(e){const t={};return A.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new P({...this._def,shape:()=>t})}deepPartial(){return Ue(this)}partial(e){const t={};return A.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new P({...this._def,shape:()=>t})}required(e){const t={};return A.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof re;)i=i._def.innerType;t[s]=i}}),new P({...this._def,shape:()=>t})}keyof(){return ji(A.objectKeys(this.shape))}}P.create=(r,e)=>new P({shape:()=>r,unknownKeys:"strip",catchall:ne.create(),typeName:v.ZodObject,...x(e)});P.strictCreate=(r,e)=>new P({shape:()=>r,unknownKeys:"strict",catchall:ne.create(),typeName:v.ZodObject,...x(e)});P.lazycreate=(r,e)=>new P({shape:r,unknownKeys:"strip",catchall:ne.create(),typeName:v.ZodObject,...x(e)});class gt extends S{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new H(o.ctx.common.issues));return m(t,{code:f.invalid_union,unionErrors:a}),b}if(t.common.async)return Promise.all(s.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(n);{let i;const a=[];for(const c of s){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(c=>new H(c));return m(t,{code:f.invalid_union,unionErrors:o}),b}}get options(){return this._def.options}}gt.create=(r,e)=>new gt({options:r,typeName:v.ZodUnion,...x(e)});const Mt=r=>r instanceof vt?Mt(r.schema):r instanceof Y?Mt(r.innerType()):r instanceof bt?[r.value]:r instanceof ge?r.options:r instanceof wt?Object.keys(r.enum):r instanceof xt?Mt(r._def.innerType):r instanceof pt?[void 0]:r instanceof _t?[null]:null;class or extends S{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==g.object)return m(t,{code:f.invalid_type,expected:g.object,received:t.parsedType}),b;const s=this.discriminator,n=t.data[s],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(m(t,{code:f.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),b)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const i of t){const a=Mt(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new or({typeName:v.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...x(s)})}}function Jr(r,e){const t=le(r),s=le(e);if(r===e)return{valid:!0,data:r};if(t===g.object&&s===g.object){const n=A.objectKeys(e),i=A.objectKeys(r).filter(o=>n.indexOf(o)!==-1),a={...r,...e};for(const o of i){const c=Jr(r[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(t===g.array&&s===g.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<r.length;i++){const a=r[i],o=e[i],c=Jr(a,o);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===g.date&&s===g.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class mt extends S{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(i,a)=>{if(Fr(i)||Fr(a))return b;const o=Jr(i.value,a.value);return o.valid?((Vr(i)||Vr(a))&&t.dirty(),{status:t.value,value:o.data}):(m(s,{code:f.invalid_intersection_types}),b)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,a])=>n(i,a)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}mt.create=(r,e,t)=>new mt({left:r,right:e,typeName:v.ZodIntersection,...x(t)});class te extends S{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==g.array)return m(s,{code:f.invalid_type,expected:g.array,received:s.parsedType}),b;if(s.data.length<this._def.items.length)return m(s,{code:f.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b;!this._def.rest&&s.data.length>this._def.items.length&&(m(s,{code:f.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ee(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(i).then(a=>U.mergeArray(t,a)):U.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new te({...this._def,rest:e})}}te.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new te({items:r,typeName:v.ZodTuple,rest:null,...x(e)})};class yt extends S{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==g.object)return m(s,{code:f.invalid_type,expected:g.object,received:s.parsedType}),b;const n=[],i=this._def.keyType,a=this._def.valueType;for(const o in s.data)n.push({key:i._parse(new ee(s,o,s.path,o)),value:a._parse(new ee(s,s.data[o],s.path,o))});return s.common.async?U.mergeObjectAsync(t,n):U.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof S?new yt({keyType:e,valueType:t,typeName:v.ZodRecord,...x(s)}):new yt({keyType:K.create(),valueType:e,typeName:v.ZodRecord,...x(t)})}}class Ht extends S{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==g.map)return m(s,{code:f.invalid_type,expected:g.map,received:s.parsedType}),b;const n=this._def.keyType,i=this._def.valueType,a=[...s.data.entries()].map(([o,c],l)=>({key:n._parse(new ee(s,o,s.path,[l,"key"])),value:i._parse(new ee(s,c,s.path,[l,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return b;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return b;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}}}}Ht.create=(r,e,t)=>new Ht({valueType:e,keyType:r,typeName:v.ZodMap,...x(t)});class Ae extends S{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==g.set)return m(s,{code:f.invalid_type,expected:g.set,received:s.parsedType}),b;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(m(s,{code:f.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(m(s,{code:f.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return b;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const o=[...s.data.values()].map((c,l)=>i._parse(new ee(s,c,s.path,l)));return s.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,t){return new Ae({...this._def,minSize:{value:e,message:y.toString(t)}})}max(e,t){return new Ae({...this._def,maxSize:{value:e,message:y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ae.create=(r,e)=>new Ae({valueType:r,minSize:null,maxSize:null,typeName:v.ZodSet,...x(e)});class Ze extends S{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==g.function)return m(t,{code:f.invalid_type,expected:g.function,received:t.parsedType}),b;function s(o,c){return Ft({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,qt(),dt].filter(l=>!!l),issueData:{code:f.invalid_arguments,argumentsError:c}})}function n(o,c){return Ft({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,qt(),dt].filter(l=>!!l),issueData:{code:f.invalid_return_type,returnTypeError:c}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Je){const o=this;return Z(async function(...c){const l=new H([]),u=await o._def.args.parseAsync(c,i).catch(_=>{throw l.addIssue(s(c,_)),l}),d=await Reflect.apply(a,this,u);return await o._def.returns._def.type.parseAsync(d,i).catch(_=>{throw l.addIssue(n(d,_)),l})})}else{const o=this;return Z(function(...c){const l=o._def.args.safeParse(c,i);if(!l.success)throw new H([s(c,l.error)]);const u=Reflect.apply(a,this,l.data),d=o._def.returns.safeParse(u,i);if(!d.success)throw new H([n(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ze({...this._def,args:te.create(e).rest(Ee.create())})}returns(e){return new Ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new Ze({args:e||te.create([]).rest(Ee.create()),returns:t||Ee.create(),typeName:v.ZodFunction,...x(s)})}}class vt extends S{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}vt.create=(r,e)=>new vt({getter:r,typeName:v.ZodLazy,...x(e)});class bt extends S{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return m(t,{received:t.data,code:f.invalid_literal,expected:this._def.value}),b}return{status:"valid",value:e.data}}get value(){return this._def.value}}bt.create=(r,e)=>new bt({value:r,typeName:v.ZodLiteral,...x(e)});function ji(r,e){return new ge({values:r,typeName:v.ZodEnum,...x(e)})}class ge extends S{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return m(t,{expected:A.joinValues(s),received:t.parsedType,code:f.invalid_type}),b}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),s=this._def.values;return m(t,{received:t.data,code:f.invalid_enum_value,options:s}),b}return Z(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return ge.create(e)}exclude(e){return ge.create(this.options.filter(t=>!e.includes(t)))}}ge.create=ji;class wt extends S{_parse(e){const t=A.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==g.string&&s.parsedType!==g.number){const n=A.objectValues(t);return m(s,{expected:A.joinValues(n),received:s.parsedType,code:f.invalid_type}),b}if(t.indexOf(e.data)===-1){const n=A.objectValues(t);return m(s,{received:s.data,code:f.invalid_enum_value,options:n}),b}return Z(e.data)}get enum(){return this._def.values}}wt.create=(r,e)=>new wt({values:r,typeName:v.ZodNativeEnum,...x(e)});class Je extends S{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==g.promise&&t.common.async===!1)return m(t,{code:f.invalid_type,expected:g.promise,received:t.parsedType}),b;const s=t.parsedType===g.promise?t.data:Promise.resolve(t.data);return Z(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Je.create=(r,e)=>new Je({type:r,typeName:v.ZodPromise,...x(e)});class Y extends S{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===v.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:a=>{m(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const a=n.transform(s.data,i);return s.common.issues.length?{status:"dirty",value:s.data}:s.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:s.path,parent:s})):this._def.schema._parseSync({data:a,path:s.path,parent:s})}if(n.type==="refinement"){const a=o=>{const c=n.refinement(o,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?b:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?b:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ht(a))return a;const o=n.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>ht(a)?Promise.resolve(n.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);A.assertNever(n)}}Y.create=(r,e,t)=>new Y({schema:r,typeName:v.ZodEffects,effect:e,...x(t)});Y.createWithPreprocess=(r,e,t)=>new Y({schema:e,effect:{type:"preprocess",transform:r},typeName:v.ZodEffects,...x(t)});class re extends S{_parse(e){return this._getType(e)===g.undefined?Z(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}re.create=(r,e)=>new re({innerType:r,typeName:v.ZodOptional,...x(e)});class Ce extends S{_parse(e){return this._getType(e)===g.null?Z(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ce.create=(r,e)=>new Ce({innerType:r,typeName:v.ZodNullable,...x(e)});class xt extends S{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===g.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}xt.create=(r,e)=>new xt({innerType:r,typeName:v.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...x(e)});class Wt extends S{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Vt(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new H(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new H(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Wt.create=(r,e)=>new Wt({innerType:r,typeName:v.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...x(e)});class Gt extends S{_parse(e){if(this._getType(e)!==g.nan){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:g.nan,received:s.parsedType}),b}return{status:"valid",value:e.data}}}Gt.create=r=>new Gt({typeName:v.ZodNaN,...x(r)});const Wl=Symbol("zod_brand");class $i extends S{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class At extends S{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?b:i.status==="dirty"?(t.dirty(),Ci(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?b:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new At({in:e,out:t,typeName:v.ZodPipeline})}}class Yt extends S{_parse(e){const t=this._def.innerType._parse(e);return ht(t)&&(t.value=Object.freeze(t.value)),t}}Yt.create=(r,e)=>new Yt({innerType:r,typeName:v.ZodReadonly,...x(e)});const Ii=(r,e={},t)=>r?Ve.create().superRefine((s,n)=>{var i,a;if(!r(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,c=(a=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,l=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...l,fatal:c})}}):Ve.create(),Gl={object:P.lazycreate};var v;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(v||(v={}));const Yl=(r,e={message:`Input not instance of ${r.name}`})=>Ii(t=>t instanceof r,e),Ri=K.create,Pi=pe.create,Xl=Gt.create,Ql=_e.create,Li=ft.create,eu=Oe.create,tu=Jt.create,ru=pt.create,su=_t.create,nu=Ve.create,iu=Ee.create,au=ne.create,ou=Kt.create,cu=W.create,lu=P.create,uu=P.strictCreate,du=gt.create,hu=or.create,fu=mt.create,pu=te.create,_u=yt.create,gu=Ht.create,mu=Ae.create,yu=Ze.create,vu=vt.create,bu=bt.create,wu=ge.create,xu=wt.create,ku=Je.create,sn=Y.create,Su=re.create,Tu=Ce.create,Eu=Y.createWithPreprocess,Ou=At.create,Au=()=>Ri().optional(),Cu=()=>Pi().optional(),ju=()=>Li().optional(),$u={string:r=>K.create({...r,coerce:!0}),number:r=>pe.create({...r,coerce:!0}),boolean:r=>ft.create({...r,coerce:!0}),bigint:r=>_e.create({...r,coerce:!0}),date:r=>Oe.create({...r,coerce:!0})},Iu=b;var ue=Object.freeze({__proto__:null,defaultErrorMap:dt,setErrorMap:Nl,getErrorMap:qt,makeIssue:Ft,EMPTY_PATH:Dl,addIssueToContext:m,ParseStatus:U,INVALID:b,DIRTY:Ci,OK:Z,isAborted:Fr,isDirty:Vr,isValid:ht,isAsync:Vt,get util(){return A},get objectUtil(){return qr},ZodParsedType:g,getParsedType:le,ZodType:S,ZodString:K,ZodNumber:pe,ZodBigInt:_e,ZodBoolean:ft,ZodDate:Oe,ZodSymbol:Jt,ZodUndefined:pt,ZodNull:_t,ZodAny:Ve,ZodUnknown:Ee,ZodNever:ne,ZodVoid:Kt,ZodArray:W,ZodObject:P,ZodUnion:gt,ZodDiscriminatedUnion:or,ZodIntersection:mt,ZodTuple:te,ZodRecord:yt,ZodMap:Ht,ZodSet:Ae,ZodFunction:Ze,ZodLazy:vt,ZodLiteral:bt,ZodEnum:ge,ZodNativeEnum:wt,ZodPromise:Je,ZodEffects:Y,ZodTransformer:Y,ZodOptional:re,ZodNullable:Ce,ZodDefault:xt,ZodCatch:Wt,ZodNaN:Gt,BRAND:Wl,ZodBranded:$i,ZodPipeline:At,ZodReadonly:Yt,custom:Ii,Schema:S,ZodSchema:S,late:Gl,get ZodFirstPartyTypeKind(){return v},coerce:$u,any:nu,array:cu,bigint:Ql,boolean:Li,date:eu,discriminatedUnion:hu,effect:sn,enum:wu,function:yu,instanceof:Yl,intersection:fu,lazy:vu,literal:bu,map:gu,nan:Xl,nativeEnum:xu,never:au,null:su,nullable:Tu,number:Pi,object:lu,oboolean:ju,onumber:Cu,optional:Su,ostring:Au,pipeline:Ou,preprocess:Eu,promise:ku,record:_u,set:mu,strictObject:uu,string:Ri,symbol:tu,transformer:sn,tuple:pu,undefined:ru,union:du,unknown:iu,void:ou,NEVER:Iu,ZodIssueCode:f,quotelessJson:Ll,ZodError:H});window.Alpine=Ge;Ge.plugin(Jo);Ge.data("quotes",()=>({quotelist:Lu(),query:"",imgsrc:["http://img.bruzu.com/?backgroundImage=https://source.unsplash.com/U-Kty6HxcQc/600x400&backgroundImage.opacity=0.9&height=400&width=600&d=1&a.textAlign=center&a.fontSize=24&a.color=white&a.","http://img.bruzu.com/?backgroundImage=https://source.unsplash.com/uqAUg1zvMXQ/600x400&backgroundImage.opacity=0.9&height=400&width=600&d=1&a.textAlign=center&a.fontSize=24&a.color=white&a."],init:()=>{console.log("hey")},getQuotesR:async({quotelist:r})=>{let t=await(await fetch("https://api.quotable.io/quotes/random?limit=4")).json();console.log(t),r=t},yankQuote:async r=>{const{content:e,author:t}=r;await navigator.clipboard.writeText(`${e} -- ${t}`)}}));const Ru=ue.object({email:ue.string().email("Invalid email address").min(1,"Email is required"),password:ue.string().min(8,"Password should be at least 8 characters long")}),Pu=ue.object({email:ue.string().email("Invalid email address").min(1,"Email is required"),password:ue.string().min(8,"Password should be at least 8 characters long")});Ge.data("signup",()=>({email:"",password:"",errors:{},loading:!1,async submitForm(){const r={email:this.email,password:this.password,confirmPassword:this.confirmPassword};this.loading=!0;try{Ru.parse(r);const{data:e,error:t}=await Oi.auth.signUp({email:r.email,password:r.password});if(console.log({data:e,error:t}),t){console.log({data:e,error:t}),t.message.includes("unique")?this.errors.email="Email is already taken":this.errors.general=t.message;return}this.loading=!1,console.log({data:e,error:t}),window.location.pathname="/welcome.html"}catch(e){this.loading=!1,e instanceof ue.ZodError?this.errors=e.errors.reduce((t,s)=>(t[s.path[0]]=s.message,t),{}):this.errors.general=e.message}}}));Ge.data("login",()=>({email:"",password:"",loading:!1,err:{},async login({email:r,password:e}){const t={email:this.email,password:this.password,confirmPassword:this.confirmPassword};this.loading=!0;try{Pu.parse(t);const{data:s,error:n}=await Oi.auth.signInWithPassword({email:r,password:e});this.loading=!1,console.log({data:s,error:n}),console.log({session:s.session}),n==null?(localStorage.setItem("kwotify-session",JSON.stringify(s.session)),window.location.pathname="/dashboard.html"):this.err.loginErr=n.message}catch(s){console.log(s),this.loading=!1,s instanceof ue.ZodError?this.err=s.errors.reduce((n,i)=>(n[i.path[0]]=i.message,n),{}):this.err.general=s.message}}}));async function Lu(){let e=await(await fetch("https://api.quotable.io/quotes/random?limit=4")).json();return console.log(e),e.map((s,n)=>(n==0?s.active=!0:s.active=!1,s))}Ge.start();
